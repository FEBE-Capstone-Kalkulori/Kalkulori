{"version":3,"file":"app~3a552275.bundle.js","mappings":"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","sources":["webpack://kalkulori/./src/scripts/pages/home/meal-plan.js","webpack://kalkulori/./src/scripts/pages/home/meal-categories.js"],"sourcesContent":["import mealApiService from '../../utils/meal-api-service';\r\n\r\nconst _debugFormatInput = (input, label = 'FormatInput') => {\r\n  console.log(`🔍 ${label} Analysis:`);\r\n  console.log('==================================');\r\n  \r\n  if (!input) {\r\n    console.log('❌ Input is null/undefined');\r\n    return;\r\n  }\r\n  \r\n  console.log('📋 Input type:', typeof input);\r\n  console.log('📋 Input keys:', Object.keys(input));\r\n  \r\n  if (input.meal_plans) {\r\n    console.log('📋 Has meal_plans property');\r\n    console.log('📋 meal_plans type:', typeof input.meal_plans);\r\n    console.log('📋 meal_plans is array:', Array.isArray(input.meal_plans));\r\n    if (Array.isArray(input.meal_plans)) {\r\n      console.log('📋 meal_plans length:', input.meal_plans.length);\r\n      if (input.meal_plans.length > 0) {\r\n        console.log('📋 First plan keys:', Object.keys(input.meal_plans[0]));\r\n        console.log('📋 First plan sample:', JSON.stringify(input.meal_plans[0], null, 4));\r\n      }\r\n    }\r\n  }\r\n  \r\n  const mealTypeVariations = [\r\n    'breakfast', 'lunch', 'dinner',\r\n    'Breakfast', 'Lunch', 'Dinner',\r\n    'BREAKFAST', 'LUNCH', 'DINNER'\r\n  ];\r\n  \r\n  console.log('📋 Checking for meal types:');\r\n  mealTypeVariations.forEach(type => {\r\n    if (input[type]) {\r\n      console.log(`  ✅ Found ${type}:`, Object.keys(input[type]));\r\n      console.log(`  📄 ${type} data:`, JSON.stringify(input[type], null, 4));\r\n    }\r\n  });\r\n  \r\n  console.log('==================================');\r\n};\r\n\r\nexport const formatMealPlanData = (input) => {\r\n  const userId = localStorage.getItem('userId') || 'anonymous';\r\n  console.log('🔄 formatMealPlanData input for user', userId, ':', JSON.stringify(input, null, 2));\r\n  \r\n  _debugFormatInput(input, 'formatMealPlanData Input');\r\n  \r\n  let planData = null;\r\n  \r\n  if (input && input.meal_plans && Array.isArray(input.meal_plans) && input.meal_plans.length > 0) {\r\n    planData = input.meal_plans[0];\r\n    console.log('📦 Using meal plan from API response (Case 1) for user', userId, ':', planData);\r\n  }\r\n  else if (input && (input.breakfast || input.lunch || input.dinner || \r\n                    input.Breakfast || input.Lunch || input.Dinner)) {\r\n    planData = input;\r\n    console.log('📦 Using direct meal plan object (Case 2) for user', userId, ':', planData);\r\n  }\r\n  else {\r\n    console.log('❌ No valid meal plans found in input for user', userId);\r\n    return [];\r\n  }\r\n  \r\n  const possibleMealTypes = [\r\n    { key: 'breakfast', display: 'Breakfast' },\r\n    { key: 'lunch', display: 'Lunch' }, \r\n    { key: 'dinner', display: 'Dinner' }\r\n  ];\r\n  \r\n  const availableMealKeys = Object.keys(planData);\r\n  console.log('🔍 Available meal keys in plan data for user', userId, ':', availableMealKeys);\r\n  \r\n  const formattedPlans = [];\r\n\r\n  possibleMealTypes.forEach(({ key, display }) => {\r\n    console.log(`🔍 Looking for ${key} variations for user ${userId}...`);\r\n    \r\n    const variations = [\r\n      key,\r\n      key.charAt(0).toUpperCase() + key.slice(1),\r\n      key.toUpperCase()\r\n    ];\r\n    \r\n    let mealData = null;\r\n    let foundKey = null;\r\n    \r\n    for (const variation of variations) {\r\n      if (planData[variation]) {\r\n        mealData = planData[variation];\r\n        foundKey = variation;\r\n        console.log(`✅ Found ${key} as \"${foundKey}\" for user ${userId}:`, mealData);\r\n        break;\r\n      }\r\n    }\r\n    \r\n    if (mealData) {\r\n      const formattedMeal = {\r\n        type: display,\r\n        name: mealData.Name || mealData.food_name || mealData.name || `Unknown ${display}`,\r\n        image: getFirstImageUrl(mealData.Image) || mealData.image_url || `./public/image/meals/${key}-default.jpg`,\r\n        calories: Math.round(mealData.Calories || mealData.calories_per_serving || mealData.calories || 0),\r\n        id: mealData.RecipeId || mealData.id || mealData.recipe_id || `${key}_${userId}_${Date.now()}`,\r\n        serving_size: mealData.serving_size || mealData.ServingSize || 1,\r\n        serving_unit: mealData.serving_unit || mealData.ServingUnit || 'serving',\r\n        recipe_id: mealData.RecipeId || mealData.recipe_id || mealData.id || null,\r\n        protein: mealData.protein || mealData.ProteinContent || 0,\r\n        carbs: mealData.carbs || mealData.CarbohydrateContent || 0,\r\n        fat: mealData.fat || mealData.FatContent || 0,\r\n        user_id: userId\r\n      };\r\n      \r\n      console.log(`✅ Formatted ${key} for user ${userId}:`, formattedMeal);\r\n      formattedPlans.push(formattedMeal);\r\n    } else {\r\n      console.log(`❌ Missing ${key} in plan data for user ${userId}`);\r\n      \r\n      const defaultMeal = {\r\n        type: display,\r\n        name: `Default ${display}`,\r\n        image: `./public/image/meals/${key}-default.jpg`,\r\n        calories: 300,\r\n        id: `default_${key}_${userId}_${Date.now()}`,\r\n        serving_size: 1,\r\n        serving_unit: 'serving',\r\n        recipe_id: null,\r\n        protein: 15,\r\n        carbs: 40,\r\n        fat: 10,\r\n        user_id: userId\r\n      };\r\n      \r\n      console.log(`🔧 Using default ${key} for user ${userId}:`, defaultMeal);\r\n      formattedPlans.push(defaultMeal);\r\n    }\r\n  });\r\n\r\n  console.log('🔄 formatMealPlanData output for user', userId, ':', formattedPlans);\r\n  console.log('🔄 Total formatted meals for user', userId, ':', formattedPlans.length);\r\n  \r\n  return formattedPlans;\r\n};\r\n\r\nconst getFirstImageUrl = (inputString) => {\r\n  if (!inputString || typeof inputString !== 'string') {\r\n    return null;\r\n  }\r\n  \r\n  const cleanInput = inputString.replace(/\\\\\\//g, '/');\r\n  const imageUrls = cleanInput.split(/,\\s*(?=https?:\\/\\/)/);\r\n  const firstUrl = imageUrls[0];\r\n  \r\n  if (firstUrl && firstUrl.trim()) {\r\n    return firstUrl.trim().replace(/^\"|\"$/g, '');\r\n  }\r\n  \r\n  return null;\r\n};\r\n\r\nexport const calculateTotalCalories = (plans) => {\r\n  const userId = localStorage.getItem('userId') || 'anonymous';\r\n  const total = plans.reduce((total, plan) => total + (plan.calories || 0), 0);\r\n  console.log('🧮 Total calories calculated for user', userId, ':', total);\r\n  return total;\r\n};\r\n\r\nexport const getDefaultMealPlan = () => {\r\n  const userId = localStorage.getItem('userId') || 'anonymous';\r\n  console.log('📋 Generating default meal plan for user:', userId);\r\n  \r\n  return [\r\n    {\r\n      type: 'Breakfast',\r\n      name: 'Fried Chicken Wings',\r\n      image: './public/image/meals/fried-chicken-wings.jpg',\r\n      calories: 400,\r\n      id: `default_breakfast_${userId}`,\r\n      serving_size: 1,\r\n      serving_unit: 'serving',\r\n      user_id: userId\r\n    },\r\n    {\r\n      type: 'Lunch',\r\n      name: 'Fried Rice with Egg',\r\n      image: './public/image/meals/fried-rice-egg.jpg',\r\n      calories: 450,\r\n      id: `default_lunch_${userId}`,\r\n      serving_size: 1,\r\n      serving_unit: 'serving',\r\n      user_id: userId\r\n    },\r\n    {\r\n      type: 'Dinner',\r\n      name: 'Soto Ayam',\r\n      image: './public/image/meals/soto-ayam.jpg',\r\n      calories: 350,\r\n      id: `default_dinner_${userId}`,\r\n      serving_size: 1,\r\n      serving_unit: 'serving',\r\n      user_id: userId\r\n    }\r\n  ];\r\n};\r\n\r\nexport const createMealPlanSection = (data) => {\r\n  const userId = localStorage.getItem('userId') || 'anonymous';\r\n  console.log('🎨 createMealPlanSection called with data for user', userId, ':', {\r\n    loading: data.loading,\r\n    error: data.error,\r\n    plansExists: !!data.plans,\r\n    plansLength: data.plans?.length || 0,\r\n    totalCalories: data.totalCalories,\r\n    targetCalories: data.targetCalories,\r\n    dataKeys: data ? Object.keys(data) : []\r\n  });\r\n\r\n  if (!data) {\r\n    console.log('🎨 No data provided, rendering error state for user:', userId);\r\n    return `\r\n      <div class=\"error-container\">\r\n        <div class=\"error-icon\">⚠️</div>\r\n        <p class=\"error-message\">No meal plan data available</p>\r\n        <button class=\"retry-btn\" id=\"generate-meal-plan-btn\">Generate Plan</button>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  if (data.loading) {\r\n    console.log('🎨 Rendering loading state for user:', userId);\r\n    return `\r\n      <div class=\"loading-container\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <p>Generating personalized meal plan...</p>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  if (data.error) {\r\n    console.log('🎨 Rendering error state for user', userId, ':', data.error);\r\n    const isProfileError = data.error.includes('profile') || \r\n                          data.error.includes('calorie target') || \r\n                          data.error.includes('Profil') ||\r\n                          data.error.includes('complete your profile') ||\r\n                          data.error.includes('Profile setup required');\r\n    const buttonText = isProfileError ? 'Complete Profile' : 'Try Again';\r\n    const buttonAction = isProfileError ? 'complete-profile-btn' : 'generate-meal-plan-btn';\r\n    \r\n    return `\r\n      <div class=\"error-container\">\r\n        <div class=\"error-icon\">⚠️</div>\r\n        <p class=\"error-message\">${data.error}</p>\r\n        <button class=\"retry-btn\" id=\"${buttonAction}\">${buttonText}</button>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  if (!data.plans || !Array.isArray(data.plans) || data.plans.length === 0) {\r\n    console.log('🎨 Rendering no plans state for user', userId, '- plans validation:', {\r\n      plansExists: !!data.plans,\r\n      plansIsArray: Array.isArray(data.plans),\r\n      plansLength: data.plans?.length || 0,\r\n      plansContent: data.plans\r\n    });\r\n    \r\n    return `\r\n      <div class=\"error-container\">\r\n        <div class=\"error-icon\">🍽️</div>\r\n        <p class=\"error-message\">No meal plans available</p>\r\n        <button class=\"retry-btn\" id=\"generate-meal-plan-btn\">Generate Plan</button>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  const totalCalories = data.totalCalories || calculateTotalCalories(data.plans) || 0;\r\n  const targetCalories = data.targetCalories || 1500;\r\n\r\n  console.log('🎨 Rendering meal plan content with', data.plans.length, 'plans for user:', userId);\r\n  console.log('🎨 Calorie info for user', userId, ':', { totalCalories, targetCalories });\r\n  \r\n  return `\r\n    <div class=\"meal-plan-content\">\r\n      <div class=\"meal-plan-header\">\r\n        <div class=\"meal-plan-calories\">\r\n          <span class=\"current-calories\">${totalCalories}</span>\r\n          <span class=\"calories-separator\">kcal/</span>\r\n          <span class=\"target-calories\">${targetCalories}</span>\r\n        </div>\r\n        <div class=\"meal-plan-buttons\">\r\n          <button class=\"generate-plan-btn add-plan-btn\" id=\"add-full-meal-plan-btn\">\r\n            <span class=\"btn-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#FFFFFF\"><path d=\"M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z\"/></svg></span>\r\n            Add Plan\r\n          </button>\r\n          <button class=\"generate-plan-btn\" id=\"generate-meal-plan-btn\">\r\n            <span class=\"btn-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#FFFFFF\"><path d=\"M204-318q-22-38-33-78t-11-82q0-134 93-228t227-94h7l-64-64 56-56 160 160-160 160-56-56 64-64h-7q-100 0-170 70.5T240-478q0 26 6 51t18 49l-60 60ZM481-40 321-200l160-160 56 56-64 64h7q100 0 170-70.5T720-482q0-26-6-51t-18-49l60-60q22 38 33 78t11 82q0 134-93 228t-227 94h-7l64 64-56 56Z\"/></svg></span>\r\n            New Plan\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"meal-plan-grid\">\r\n        ${data.plans.map(plan => createMealPlanCard(plan)).join('')}\r\n      </div>\r\n      \r\n      ${data.plans.length < 3 ? `\r\n        <div class=\"meal-plan-notice\">\r\n          <p>⚠️ Some meals may be using default options. Try generating a new plan.</p>\r\n        </div>\r\n      ` : ''}\r\n    </div>\r\n  `;\r\n};\r\n\r\nexport const createMealPlanCard = (meal) => {\r\n  const userId = localStorage.getItem('userId') || 'anonymous';\r\n  \r\n  if (!meal) {\r\n    console.warn('⚠️ No meal data provided to createMealPlanCard for user:', userId);\r\n    return '';\r\n  }\r\n\r\n  const mealType = meal.type || 'Meal';\r\n  const mealName = meal.name || 'Unknown Meal';\r\n  const mealCalories = meal.calories || 0;\r\n  const mealImage = meal.image || './public/image/meals/default-meal.jpg';\r\n  const mealId = meal.id || meal.recipe_id || `meal_${userId}_${Date.now()}`;\r\n  \r\n  console.log('🃏 Creating meal card for user', userId, ':', { mealType, mealName, mealCalories, mealId });\r\n  \r\n  return `\r\n    <div class=\"meal-plan-card\" data-meal-type=\"${mealType.toLowerCase()}\" data-meal-id=\"${mealId}\" data-user-id=\"${userId}\">\r\n      <div class=\"meal-plan-image\" data-meal-details-trigger>\r\n        <img src=\"${mealImage}\" alt=\"${mealName}\" onerror=\"this.src='./public/image/meals/default-meal.jpg'; this.onerror=null;\">\r\n        <div class=\"image-overlay\">\r\n          <span class=\"view-details-text\"><svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#FFFFFF\"><path d=\"M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z\"/></svg> View Details</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"meal-plan-info\">\r\n        <div class=\"meal-type\">${mealType}</div>\r\n        <div class=\"meal-name\" title=\"${mealName}\">${mealName}</div>\r\n        <div class=\"meal-calories\">${mealCalories} kcal</div>\r\n        ${meal.protein || meal.carbs || meal.fat ? `\r\n          <div class=\"meal-nutrition-mini\">\r\n            ${meal.protein ? `P: ${Math.round(meal.protein)}g ` : ''}\r\n            ${meal.carbs ? `C: ${Math.round(meal.carbs)}g ` : ''}\r\n            ${meal.fat ? `F: ${Math.round(meal.fat)}g` : ''}\r\n          </div>\r\n        ` : ''}\r\n      </div>\r\n      <button class=\"meal-plan-add-btn\" data-meal='${JSON.stringify({\r\n        id: mealId,\r\n        name: mealName,\r\n        calories: mealCalories,\r\n        serving_size: meal.serving_size || 1,\r\n        serving_unit: meal.serving_unit || 'serving',\r\n        type: mealType,\r\n        image: mealImage,\r\n        recipe_id: meal.recipe_id || meal.id,\r\n        user_id: userId\r\n      })}' title=\"Add to diary\">\r\n        <span class=\"plus-icon\">+</span>\r\n      </button>\r\n    </div>\r\n  `;\r\n};\r\n\r\nconst getTodayString = () => {\r\n  const now = new Date();\r\n  const year = now.getFullYear();\r\n  const month = String(now.getMonth() + 1).padStart(2, '0');\r\n  const day = String(now.getDate()).padStart(2, '0');\r\n  return `${year}-${month}-${day}`;\r\n};\r\n\r\nconst showMealPlanPopup = (mealData) => {\r\n  const userId = localStorage.getItem('userId') || 'anonymous';\r\n  console.log('🍽️ Showing meal plan popup for user', userId, ':', mealData);\r\n  \r\n  const existingPopup = document.getElementById('meal-plan-popup-overlay');\r\n  if (existingPopup) {\r\n    existingPopup.remove();\r\n  }\r\n  \r\n  const popupHTML = `\r\n    <div class=\"meal-popup-overlay\" id=\"meal-plan-popup-overlay\">\r\n      <div class=\"meal-popup\">\r\n        <div class=\"meal-popup-header\">\r\n          <h3>Add ${mealData.name}</h3>\r\n          <button class=\"popup-close\" id=\"meal-plan-popup-close\">&times;</button>\r\n        </div>\r\n        <div class=\"meal-popup-content\">\r\n          <div class=\"form-group\">\r\n            <label for=\"meal-plan-meal-type\">Meal Type:</label>\r\n            <select id=\"meal-plan-meal-type\" required>\r\n              <option value=\"\">Select meal type</option>\r\n              <option value=\"breakfast\" ${mealData.type?.toLowerCase() === 'breakfast' ? 'selected' : ''}>Breakfast</option>\r\n              <option value=\"lunch\" ${mealData.type?.toLowerCase() === 'lunch' ? 'selected' : ''}>Lunch</option>\r\n              <option value=\"dinner\" ${mealData.type?.toLowerCase() === 'dinner' ? 'selected' : ''}>Dinner</option>\r\n              <option value=\"snack\">Snack</option>\r\n            </select>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"meal-plan-servings\">Servings:</label>\r\n            <input type=\"number\" id=\"meal-plan-servings\" min=\"1\" step=\"1\" value=\"1\" required>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"meal-plan-log-date\">Date:</label>\r\n            <input type=\"date\" id=\"meal-plan-log-date\" value=\"${getTodayString()}\" required>\r\n          </div>\r\n          <div class=\"form-actions\">\r\n            <button class=\"btn-cancel\" id=\"meal-plan-btn-cancel\">Cancel</button>\r\n            <button class=\"btn-add\" id=\"meal-plan-btn-add\">Add</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `;\r\n  \r\n  document.body.insertAdjacentHTML('beforeend', popupHTML);\r\n  \r\n  const overlay = document.getElementById('meal-plan-popup-overlay');\r\n  const closeBtn = document.getElementById('meal-plan-popup-close');\r\n  const cancelBtn = document.getElementById('meal-plan-btn-cancel');\r\n  const addBtn = document.getElementById('meal-plan-btn-add');\r\n  \r\n  const closePopup = () => {\r\n    if (overlay && overlay.parentNode) {\r\n      overlay.parentNode.removeChild(overlay);\r\n    }\r\n  };\r\n  \r\n  if (closeBtn) closeBtn.addEventListener('click', closePopup);\r\n  if (cancelBtn) cancelBtn.addEventListener('click', closePopup);\r\n  if (overlay) {\r\n    overlay.addEventListener('click', (e) => {\r\n      if (e.target === overlay) closePopup();\r\n    });\r\n  }\r\n  \r\n  if (addBtn) {\r\n    addBtn.addEventListener('click', async () => {\r\n      const mealType = document.getElementById('meal-plan-meal-type')?.value;\r\n      const servings = parseFloat(document.getElementById('meal-plan-servings')?.value);\r\n      const logDate = document.getElementById('meal-plan-log-date')?.value;\r\n      \r\n      if (!mealType || !servings || !logDate) {\r\n        alert('Please fill all fields');\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        addBtn.disabled = true;\r\n        addBtn.textContent = 'Adding...';\r\n        \r\n        console.log('🍽️ Adding meal for user', userId, ':', {\r\n          recipe_id: mealData.recipe_id,\r\n          meal_type: mealType,\r\n          servings: servings,\r\n          log_date: logDate\r\n        });\r\n        \r\n        if (mealData.recipe_id && !mealData.id?.toString().startsWith('default_')) {\r\n          await mealApiService.addMealFromPlan({\r\n            recipe_id: mealData.recipe_id,\r\n            meal_type: mealType,\r\n            servings: servings,\r\n            log_date: logDate\r\n          });\r\n        } else {\r\n          await mealApiService.createMealEntry({\r\n            food_item_id: mealData.id,\r\n            meal_type: mealType,\r\n            servings: servings,\r\n            log_date: logDate\r\n          });\r\n        }\r\n        \r\n        alert('Meal added successfully!');\r\n        closePopup();\r\n        \r\n        const refreshEvent = new CustomEvent('mealPlanMealAdded');\r\n        document.dispatchEvent(refreshEvent);\r\n        \r\n      } catch (error) {\r\n        console.error('Error adding meal from plan for user', userId, ':', error);\r\n        alert(`Failed to add meal: ${error.message}`);\r\n        addBtn.disabled = false;\r\n        addBtn.textContent = 'Add';\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nconst addFullMealPlan = async (plans) => {\r\n  const userId = localStorage.getItem('userId') || 'anonymous';\r\n  console.log('🍽️ Adding full meal plan for user', userId, ':', plans);\r\n  \r\n  try {\r\n    const today = getTodayString();\r\n    \r\n    const mealPlanData = {\r\n      meal_plan: {},\r\n      log_date: today\r\n    };\r\n    \r\n    plans.forEach(plan => {\r\n      if (plan.user_id && plan.user_id !== userId) {\r\n        console.warn('⚠️ Skipping meal from different user:', plan.user_id, 'current:', userId);\r\n        return;\r\n      }\r\n      \r\n      const mealType = plan.type.toLowerCase();\r\n      if (['breakfast', 'lunch', 'dinner'].includes(mealType)) {\r\n        mealPlanData.meal_plan[mealType] = {\r\n          RecipeId: plan.recipe_id || plan.id,\r\n          Name: plan.name,\r\n          Calories: plan.calories,\r\n          Image: plan.image\r\n        };\r\n      }\r\n    });\r\n    \r\n    if (Object.keys(mealPlanData.meal_plan).length === 0) {\r\n      throw new Error('No valid meals to add for current user');\r\n    }\r\n    \r\n    console.log('🍽️ Adding full meal plan for user', userId, ':', mealPlanData);\r\n    \r\n    try {\r\n      await mealApiService.addFullMealPlan(mealPlanData);\r\n      alert('Full meal plan added successfully!');\r\n    } catch (error) {\r\n      console.warn('🔄 Full meal plan endpoint failed for user', userId, ', trying individual meals:', error.message);\r\n      \r\n      if (error.message.includes('Endpoint not found') || error.message.includes('404') || error.message.includes('Network error')) {\r\n        console.log('🔄 Falling back to individual meal additions for user:', userId);\r\n        \r\n        let successCount = 0;\r\n        let failCount = 0;\r\n        \r\n        for (let i = 0; i < plans.length; i++) {\r\n          const plan = plans[i];\r\n          \r\n          if (plan.user_id && plan.user_id !== userId) {\r\n            console.warn('⚠️ Skipping meal from different user during individual add:', plan.user_id);\r\n            continue;\r\n          }\r\n          \r\n          if (plan.recipe_id && !plan.id?.toString().startsWith('default_')) {\r\n            try {\r\n              await mealApiService.addMealFromPlan({\r\n                recipe_id: plan.recipe_id,\r\n                meal_type: plan.type.toLowerCase(),\r\n                servings: 1,\r\n                log_date: today\r\n              });\r\n              successCount++;\r\n              console.log(`✅ Added ${plan.name} successfully for user ${userId}`);\r\n            } catch (individualError) {\r\n              failCount++;\r\n              console.error(`❌ Failed to add ${plan.name} for user ${userId}:`, individualError);\r\n            }\r\n          } else {\r\n            try {\r\n              await mealApiService.createMealEntry({\r\n                food_item_id: plan.id,\r\n                meal_type: plan.type.toLowerCase(),\r\n                servings: 1,\r\n                log_date: today\r\n              });\r\n              successCount++;\r\n              console.log(`✅ Added ${plan.name} (default) successfully for user ${userId}`);\r\n            } catch (individualError) {\r\n              failCount++;\r\n              console.error(`❌ Failed to add ${plan.name} (default) for user ${userId}:`, individualError);\r\n            }\r\n          }\r\n          \r\n          if (i < plans.length - 1) {\r\n            await new Promise(resolve => setTimeout(resolve, 300));\r\n          }\r\n        }\r\n        \r\n        if (successCount > 0) {\r\n          alert(`Meal plan added successfully! ${successCount} meals added${failCount > 0 ? `, ${failCount} failed` : ''}.`);\r\n        } else {\r\n          throw new Error('Failed to add any meals from the plan');\r\n        }\r\n      } else {\r\n        throw error;\r\n      }\r\n    }\r\n    \r\n    const refreshEvent = new CustomEvent('mealPlanMealAdded');\r\n    document.dispatchEvent(refreshEvent);\r\n    \r\n  } catch (error) {\r\n    console.error('Error adding full meal plan for user', userId, ':', error);\r\n    alert(`Failed to add meal plan: ${error.message}`);\r\n  }\r\n};\r\n\r\nconst showMealDetailsPopup = async (mealData) => {\r\n  const userId = localStorage.getItem('userId') || 'anonymous';\r\n  console.log('🔍 Showing meal details popup for user', userId, ':', mealData);\r\n  \r\n  const existingPopup = document.getElementById('meal-details-popup-overlay');\r\n  if (existingPopup) {\r\n    existingPopup.remove();\r\n  }\r\n\r\n  let popupContent = '';\r\n  \r\n  if (!mealData.recipe_id || mealData.id?.toString().startsWith('default_')) {\r\n    popupContent = `\r\n      <div class=\"meal-details-content\">\r\n        <div class=\"meal-details-header\">\r\n          <img src=\"${mealData.image || 'https://images.unsplash.com/photo-1546554137-f86b9593a222'}\" alt=\"${mealData.name}\">\r\n          <div class=\"meal-basic-info\">\r\n            <h3>${mealData.name}</h3>\r\n            <p class=\"meal-calories\">${mealData.calories} kcal per serving</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"meal-nutrition\">\r\n          <h4>Nutrition per serving:</h4>\r\n          <div class=\"nutrition-grid\">\r\n            <div class=\"nutrition-item\">\r\n              <span class=\"nutrition-label\">Protein</span>\r\n              <span class=\"nutrition-value\">${Math.round(mealData.protein || 0)}g</span>\r\n            </div>\r\n            <div class=\"nutrition-item\">\r\n              <span class=\"nutrition-label\">Carbs</span>\r\n              <span class=\"nutrition-value\">${Math.round(mealData.carbs || 0)}g</span>\r\n            </div>\r\n            <div class=\"nutrition-item\">\r\n              <span class=\"nutrition-label\">Fat</span>\r\n              <span class=\"nutrition-value\">${Math.round(mealData.fat || 0)}g</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"meal-info-note\">\r\n          <p>This is a default meal. Limited details available.</p>\r\n        </div>\r\n      </div>\r\n    `;\r\n  } else {\r\n    popupContent = `\r\n      <div class=\"meal-details-loading\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <p>Loading meal details...</p>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  const popupHTML = `\r\n    <div class=\"meal-details-popup-overlay\" id=\"meal-details-popup-overlay\">\r\n      <div class=\"meal-details-popup\">\r\n        <div class=\"meal-details-popup-header\">\r\n          <h2>Meal Details</h2>\r\n          <button class=\"popup-close\" id=\"meal-details-close\">&times;</button>\r\n        </div>\r\n        <div class=\"meal-details-popup-body\">\r\n          ${popupContent}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  document.body.insertAdjacentHTML('beforeend', popupHTML);\r\n\r\n  const overlay = document.getElementById('meal-details-popup-overlay');\r\n  const closeBtn = document.getElementById('meal-details-close');\r\n\r\n  const closePopup = () => {\r\n    if (overlay && overlay.parentNode) {\r\n      overlay.parentNode.removeChild(overlay);\r\n    }\r\n  };\r\n\r\n  if (closeBtn) closeBtn.addEventListener('click', closePopup);\r\n  if (overlay) {\r\n    overlay.addEventListener('click', (e) => {\r\n      if (e.target === overlay) closePopup();\r\n    });\r\n  }\r\n\r\n  if (mealData.recipe_id && !mealData.id?.toString().startsWith('default_')) {\r\n    try {\r\n      console.log('🔍 Fetching meal details from API for user', userId, ':', mealData.recipe_id);\r\n      const mealDetails = await mealApiService.getMealDetails(mealData.recipe_id);\r\n      \r\n      if (mealDetails && mealDetails.meal) {\r\n        const meal = mealDetails.meal;\r\n        const detailsContent = `\r\n          <div class=\"meal-details-content\">\r\n            <div class=\"meal-details-header\">\r\n              <img src=\"${meal.image_url || mealData.image}\" alt=\"${meal.food_name}\">\r\n              <div class=\"meal-basic-info\">\r\n                <h3>${meal.food_name}</h3>\r\n                <p class=\"meal-calories\">${meal.calories_per_serving} kcal per ${meal.serving_unit || 'serving'}</p>\r\n                ${meal.recipe_metadata?.total_time ? `<p class=\"meal-time\">⏱️ ${meal.recipe_metadata.total_time} minutes</p>` : ''}\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"meal-nutrition\">\r\n              <h4>Nutrition per serving:</h4>\r\n              <div class=\"nutrition-grid\">\r\n                <div class=\"nutrition-item\">\r\n                  <span class=\"nutrition-label\">Protein</span>\r\n                  <span class=\"nutrition-value\">${Math.round(meal.protein_per_serving || 0)}g</span>\r\n                </div>\r\n                <div class=\"nutrition-item\">\r\n                  <span class=\"nutrition-label\">Carbs</span>\r\n                  <span class=\"nutrition-value\">${Math.round(meal.carbs_per_serving || 0)}g</span>\r\n                </div>\r\n                <div class=\"nutrition-item\">\r\n                  <span class=\"nutrition-label\">Fat</span>\r\n                  <span class=\"nutrition-value\">${Math.round(meal.fat_per_serving || 0)}g</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            ${meal.recipe_metadata?.ingredients && meal.recipe_metadata.ingredients.length > 0 ? `\r\n              <div class=\"meal-ingredients\">\r\n                <h4>Ingredients:</h4>\r\n                <ul>\r\n                  ${meal.recipe_metadata.ingredients.slice(0, 10).map(ingredient => `<li>${ingredient}</li>`).join('')}\r\n                  ${meal.recipe_metadata.ingredients.length > 10 ? `<li><em>... and ${meal.recipe_metadata.ingredients.length - 10} more ingredients</em></li>` : ''}\r\n                </ul>\r\n              </div>\r\n            ` : ''}\r\n\r\n            ${meal.recipe_metadata?.total_nutrition ? `\r\n              <div class=\"detailed-nutrition\">\r\n                <h4>Detailed Nutrition:</h4>\r\n                <div class=\"nutrition-details-grid\">\r\n                  ${meal.recipe_metadata.total_nutrition.fiber ? `<div>Fiber: ${Math.round(meal.recipe_metadata.total_nutrition.fiber)}g</div>` : ''}\r\n                  ${meal.recipe_metadata.total_nutrition.sugar ? `<div>Sugar: ${Math.round(meal.recipe_metadata.total_nutrition.sugar)}g</div>` : ''}\r\n                  ${meal.recipe_metadata.total_nutrition.sodium ? `<div>Sodium: ${Math.round(meal.recipe_metadata.total_nutrition.sodium)}mg</div>` : ''}\r\n                  ${meal.recipe_metadata.total_nutrition.cholesterol ? `<div>Cholesterol: ${Math.round(meal.recipe_metadata.total_nutrition.cholesterol)}mg</div>` : ''}\r\n                </div>\r\n              </div>\r\n            ` : ''}\r\n          </div>\r\n        `;\r\n\r\n        const bodyElement = document.querySelector('.meal-details-popup-body');\r\n        if (bodyElement) {\r\n          bodyElement.innerHTML = detailsContent;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching meal details for user', userId, ':', error);\r\n      const bodyElement = document.querySelector('.meal-details-popup-body');\r\n      if (bodyElement) {\r\n        bodyElement.innerHTML = `\r\n          <div class=\"meal-details-error\">\r\n            <h4>Error</h4>\r\n            <p>Failed to load meal details. Please try again.</p>\r\n            <div class=\"basic-meal-info\">\r\n              <img src=\"${mealData.image}\" alt=\"${mealData.name}\">\r\n              <h3>${mealData.name}</h3>\r\n              <p>${mealData.calories} kcal per serving</p>\r\n            </div>\r\n          </div>\r\n        `;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport const attachMealPlanEventHandlers = (onGenerateClicked, onMealItemClicked, onCompleteProfileClicked) => {\r\n  const userId = localStorage.getItem('userId') || 'anonymous';\r\n  console.log('🔗 Attaching meal plan event handlers for user:', userId);\r\n  \r\n  const generateMealPlanButton = document.getElementById('generate-meal-plan-btn');\r\n  const completeProfileButton = document.getElementById('complete-profile-btn');\r\n  const addFullPlanButton = document.getElementById('add-full-meal-plan-btn');\r\n  const mealPlanAddButtons = document.querySelectorAll('.meal-plan-add-btn');\r\n  const mealPlanDetailsTriggers = document.querySelectorAll('[data-meal-details-trigger]');\r\n  \r\n  if (generateMealPlanButton && onGenerateClicked) {\r\n    generateMealPlanButton.addEventListener('click', onGenerateClicked);\r\n  }\r\n\r\n  if (completeProfileButton && onCompleteProfileClicked) {\r\n    completeProfileButton.addEventListener('click', onCompleteProfileClicked);\r\n  }\r\n\r\n  if (addFullPlanButton) {\r\n    addFullPlanButton.addEventListener('click', async () => {\r\n      const mealPlanCards = document.querySelectorAll('.meal-plan-card');\r\n      const plans = [];\r\n      \r\n      mealPlanCards.forEach(card => {\r\n        const cardUserId = card.dataset.userId;\r\n        if (cardUserId && cardUserId !== userId) {\r\n          console.warn('⚠️ Skipping meal card from different user:', cardUserId);\r\n          return;\r\n        }\r\n        \r\n        const addButton = card.querySelector('.meal-plan-add-btn');\r\n        if (addButton && addButton.dataset.meal) {\r\n          try {\r\n            const mealData = JSON.parse(addButton.dataset.meal);\r\n            if (!mealData.user_id || mealData.user_id === userId) {\r\n              plans.push(mealData);\r\n            } else {\r\n              console.warn('⚠️ Skipping meal from different user in meal data:', mealData.user_id);\r\n            }\r\n          } catch (error) {\r\n            console.error('Error parsing meal data for user', userId, ':', error);\r\n          }\r\n        }\r\n      });\r\n      \r\n      if (plans.length > 0) {\r\n        addFullPlanButton.disabled = true;\r\n        addFullPlanButton.textContent = 'Adding Plan...';\r\n        \r\n        try {\r\n          await addFullMealPlan(plans);\r\n        } catch (error) {\r\n          console.error('Error adding full meal plan for user', userId, ':', error);\r\n        } finally {\r\n          addFullPlanButton.disabled = false;\r\n          addFullPlanButton.innerHTML = '<span class=\"btn-icon\">📋</span> Add Plan';\r\n        }\r\n      } else {\r\n        alert('No meals found to add');\r\n      }\r\n    });\r\n  }\r\n\r\n  if (mealPlanAddButtons) {\r\n    mealPlanAddButtons.forEach(button => {\r\n      button.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        try {\r\n          const mealData = JSON.parse(button.dataset.meal);\r\n          if (!mealData.user_id || mealData.user_id === userId) {\r\n            showMealPlanPopup(mealData);\r\n          } else {\r\n            console.warn('⚠️ Attempted to add meal from different user:', mealData.user_id);\r\n            alert('Cannot add meal from different user');\r\n          }\r\n        } catch (error) {\r\n          console.error('Error parsing meal data for user', userId, ':', error);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  if (mealPlanDetailsTriggers) {\r\n    mealPlanDetailsTriggers.forEach(trigger => {\r\n      trigger.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        \r\n        const mealCard = trigger.closest('.meal-plan-card');\r\n        if (mealCard) {\r\n          const cardUserId = mealCard.dataset.userId;\r\n          if (cardUserId && cardUserId !== userId) {\r\n            console.warn('⚠️ Attempted to view details of meal from different user:', cardUserId);\r\n            return;\r\n          }\r\n          \r\n          const addButton = mealCard.querySelector('.meal-plan-add-btn');\r\n          if (addButton && addButton.dataset.meal) {\r\n            try {\r\n              const mealData = JSON.parse(addButton.dataset.meal);\r\n              if (!mealData.user_id || mealData.user_id === userId) {\r\n                showMealDetailsPopup(mealData);\r\n              } else {\r\n                console.warn('⚠️ Attempted to view details of meal from different user in meal data:', mealData.user_id);\r\n              }\r\n            } catch (error) {\r\n              console.error('Error parsing meal data for user', userId, ':', error);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n};","export const MEAL_CATEGORIES = {\r\n  'dietary': {\r\n    title: 'Dietary Preferences',\r\n    icon: '🥗',\r\n    keywords: [\r\n      'vegetarian', 'vegan', 'dairy free foods', 'egg free', 'lactose free',\r\n      'no shell fish', 'low calorie', 'healthy', 'light', 'low cholesterol', \r\n      'low protein', 'very low carbs', 'high fiber', 'high protein', 'protein'\r\n    ]\r\n  },\r\n  'cooking': {\r\n    title: 'Cooking Style',\r\n    icon: '👨‍🍳',\r\n    keywords: [\r\n      'no cook', 'stove top', 'oven', 'baking', 'broil/grill', 'microwave',\r\n      'pressure cooker', 'deep fried', 'steam', 'stir fry', 'wok',\r\n      'small appliance', 'mixer', 'dehydrator', 'bread machine'\r\n    ]\r\n  },\r\n  'mealtime': {\r\n    title: 'Meal Type & Time',\r\n    icon: '⏰',\r\n    keywords: [\r\n      'breakfast', 'brunch', 'lunch', 'dinner', 'snacks', 'dessert',\r\n      'one dish meal', 'stew', 'soup', 'pasta', 'bread', 'beverages',\r\n      '< 15 mins', '< 30 mins', '< 60 mins', 'weeknight', 'inexpensive'\r\n    ]\r\n  },\r\n  'ingredients': {\r\n    title: 'Main Ingredients',\r\n    icon: '🥘',\r\n    keywords: [\r\n      'chicken', 'beef', 'pork', 'fish', 'seafood', 'vegetable', 'soy/tofu',\r\n      'rice', 'pasta', 'beans', 'cheese', 'nuts', 'fruits', 'berries',\r\n      'mushroom', 'peppers', 'onions', 'spinach', 'corn'\r\n    ]\r\n  },\r\n  'cuisine': {\r\n    title: 'Cuisine & Flavors',\r\n    icon: '🌍',\r\n    keywords: [\r\n      'chinese', 'japanese', 'thai', 'vietnamese', 'korean', 'indian',\r\n      'italian', 'french', 'mexican', 'spanish', 'mediterranean',\r\n      'spicy', 'sweet', 'savory', 'umami', 'tangy', 'sour', 'mild'\r\n    ]\r\n  }\r\n};\r\n\r\n// Helper function to get all keywords from all categories\r\nexport const getAllKeywords = () => {\r\n  return Object.values(MEAL_CATEGORIES).reduce((allKeywords, category) => {\r\n    return [...allKeywords, ...category.keywords];\r\n  }, []);\r\n};\r\n\r\n// Helper function to find which category a keyword belongs to\r\nexport const findCategoryByKeyword = (keyword) => {\r\n  for (const [categoryKey, category] of Object.entries(MEAL_CATEGORIES)) {\r\n    if (category.keywords.includes(keyword)) {\r\n      return {\r\n        key: categoryKey,\r\n        ...category\r\n      };\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\n// Helper function to get keywords by category\r\nexport const getKeywordsByCategory = (categoryKey) => {\r\n  return MEAL_CATEGORIES[categoryKey]?.keywords || [];\r\n};\r\n\r\n// Helper function to get category info\r\nexport const getCategoryInfo = (categoryKey) => {\r\n  return MEAL_CATEGORIES[categoryKey] || null;\r\n};\r\n\r\n// Helper function to count selected keywords per category\r\nexport const countSelectedKeywordsByCategory = (selectedKeywords) => {\r\n  const counts = {};\r\n  \r\n  Object.keys(MEAL_CATEGORIES).forEach(categoryKey => {\r\n    const categoryKeywords = MEAL_CATEGORIES[categoryKey].keywords;\r\n    counts[categoryKey] = selectedKeywords.filter(keyword => \r\n      categoryKeywords.includes(keyword)\r\n    ).length;\r\n  });\r\n  \r\n  return counts;\r\n};\r\n\r\n// Helper function to validate keywords\r\nexport const validateKeywords = (keywords) => {\r\n  const allKeywords = getAllKeywords();\r\n  return keywords.filter(keyword => allKeywords.includes(keyword));\r\n};\r\n\r\n// Helper function to get random keywords for suggestions\r\nexport const getRandomKeywords = (count = 5, excludeKeywords = []) => {\r\n  const allKeywords = getAllKeywords().filter(keyword => \r\n    !excludeKeywords.includes(keyword)\r\n  );\r\n  \r\n  const shuffled = allKeywords.sort(() => 0.5 - Math.random());\r\n  return shuffled.slice(0, count);\r\n};\r\n\r\n// Helper function to group keywords by category\r\nexport const groupKeywordsByCategory = (keywords) => {\r\n  const grouped = {};\r\n  \r\n  keywords.forEach(keyword => {\r\n    const category = findCategoryByKeyword(keyword);\r\n    if (category) {\r\n      if (!grouped[category.key]) {\r\n        grouped[category.key] = {\r\n          title: category.title,\r\n          icon: category.icon,\r\n          keywords: []\r\n        };\r\n      }\r\n      grouped[category.key].keywords.push(keyword);\r\n    }\r\n  });\r\n  \r\n  return grouped;\r\n};\r\n\r\nexport default {\r\n  MEAL_CATEGORIES,\r\n  getAllKeywords,\r\n  findCategoryByKeyword,\r\n  getKeywordsByCategory,\r\n  getCategoryInfo,\r\n  countSelectedKeywordsByCategory,\r\n  validateKeywords,\r\n  getRandomKeywords,\r\n  groupKeywordsByCategory\r\n};"],"names":["_regeneratorRuntime","r","t","e","Object","prototype","n","hasOwnProperty","o","Symbol","i","iterator","a","asyncIterator","u","toStringTag","c","defineProperty","value","enumerable","configurable","writable","h","Generator","create","Error","done","method","arg","delegate","d","f","sent","_sent","dispatchException","abrupt","s","type","Context","call","wrap","GeneratorFunction","GeneratorFunctionPrototype","l","p","getPrototypeOf","y","x","v","g","forEach","_invoke","AsyncIterator","_typeof","resolve","__await","then","TypeError","next","w","tryEntries","push","m","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","unshift","pop","values","prev","charAt","slice","stop","rval","complete","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","formatMealPlanData","input","userId","localStorage","getItem","console","log","JSON","stringify","label","undefined","concat","meal_plans","Array","isArray","_debugFormatInput","planData","breakfast","lunch","dinner","Breakfast","Lunch","Dinner","availableMealKeys","formattedPlans","key","display","_ref","mealData","foundKey","_i","_variations","toUpperCase","variation","formattedMeal","Name","food_name","image","getFirstImageUrl","Image","image_url","calories","Math","round","Calories","calories_per_serving","id","RecipeId","recipe_id","Date","now","serving_size","ServingSize","serving_unit","ServingUnit","protein","ProteinContent","carbs","CarbohydrateContent","fat","FatContent","user_id","defaultMeal","inputString","firstUrl","replace","split","trim","calculateTotalCalories","plans","total","reduce","plan","getDefaultMealPlan","createMealPlanSection","data","_data$plans","_data$plans2","loading","error","plansExists","plansLength","totalCalories","targetCalories","dataKeys","isProfileError","includes","buttonText","buttonAction","plansIsArray","plansContent","map","createMealPlanCard","join","meal","warn","mealType","mealName","mealCalories","mealImage","mealId","toLowerCase","getTodayString","year","getFullYear","month","String","getMonth","padStart","day","getDate","addFullMealPlan","_ref3","_callee2","today","mealPlanData","successCount","failCount","_plan$id","refreshEvent","_context2","meal_plan","log_date","mealApiService","alert","t0","message","toString","startsWith","addMealFromPlan","meal_type","servings","t1","createMealEntry","food_item_id","t2","setTimeout","CustomEvent","document","dispatchEvent","t3","_x","showMealDetailsPopup","_ref4","_callee3","_mealData$id2","_mealData$id3","existingPopup","popupContent","popupHTML","overlay","closeBtn","closePopup","mealDetails","_meal$recipe_metadata","_meal$recipe_metadata2","_meal$recipe_metadata3","detailsContent","bodyElement","_bodyElement","_context3","getElementById","remove","body","insertAdjacentHTML","parentNode","removeChild","addEventListener","target","getMealDetails","recipe_metadata","total_time","protein_per_serving","carbs_per_serving","fat_per_serving","ingredients","ingredient","total_nutrition","fiber","sugar","sodium","cholesterol","querySelector","innerHTML","_x2","attachMealPlanEventHandlers","onGenerateClicked","onMealItemClicked","onCompleteProfileClicked","generateMealPlanButton","completeProfileButton","addFullPlanButton","mealPlanAddButtons","querySelectorAll","mealPlanDetailsTriggers","_callee4","mealPlanCards","_context4","card","cardUserId","dataset","addButton","parse","disabled","textContent","button","preventDefault","stopPropagation","_mealData$type","_mealData$type2","_mealData$type3","cancelBtn","addBtn","_callee","_document$getElementB","_document$getElementB2","_document$getElementB3","logDate","_mealData$id","_context","parseFloat","showMealPlanPopup","trigger","mealCard","closest","MEAL_CATEGORIES","title","icon","keywords","getAllKeywords","allKeywords","category","_toConsumableArray","countSelectedKeywordsByCategory","selectedKeywords","counts","categoryKey","categoryKeywords","filter","keyword","validateKeywords"],"sourceRoot":""}