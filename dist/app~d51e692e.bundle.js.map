{"version":3,"file":"app~d51e692e.bundle.js","mappings":"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","sources":["webpack://kalkulori/./src/scripts/pages/profile/profile-presenter.js","webpack://kalkulori/./src/scripts/pages/profile/index.js"],"sourcesContent":["import ProfileView from './profile-view';\r\nimport ProfileApiService from '../../utils/profile-api-service';\r\n\r\nclass ProfilePresenter {\r\n  constructor({ container }) {\r\n    this.container = container;\r\n    this.view = ProfileView;\r\n    this.apiService = new ProfileApiService();\r\n    this.isEditMode = false;\r\n    this.cameraStream = null;\r\n    this.capturedImageData = null;\r\n    this.userData = {\r\n      name: '',\r\n      gender: 'male',\r\n      age: '',\r\n      weight: '',\r\n      height: '',\r\n      targetWeight: '',\r\n      activityLevel: 'never',\r\n      avatar: null\r\n    };\r\n    \r\n    this.handlers = {\r\n      onEditAvatarClicked: this._handleEditAvatarClicked.bind(this),\r\n      onCameraOptionClicked: this._handleCameraOptionClicked.bind(this),\r\n      onGalleryOptionClicked: this._handleGalleryOptionClicked.bind(this),\r\n      onFileSelected: this._handleFileSelected.bind(this),\r\n      onCameraModalClose: this._handleCameraModalClose.bind(this),\r\n      onCameraCapture: this._handleCameraCapture.bind(this),\r\n      onCameraRetake: this._handleCameraRetake.bind(this),\r\n      onCameraUse: this._handleCameraUse.bind(this),\r\n      onGenderOptionClicked: this._handleGenderOptionClicked.bind(this),\r\n      onUpdateDataClicked: this._handleUpdateDataClicked.bind(this),\r\n      onSaveDataClicked: this._handleSaveDataClicked.bind(this),\r\n      onSignOutClicked: this._handleSignOutClicked.bind(this),\r\n      onNumberIncrease: this._handleNumberIncrease.bind(this),\r\n      onNumberDecrease: this._handleNumberDecrease.bind(this)\r\n    };\r\n  }\r\n  \r\n  async init() {\r\n    this.view.toggleHeaders(true);\r\n    await this._loadUserProfile();\r\n    this._renderView();\r\n  }\r\n  \r\n  onLeave() {\r\n    this._stopCameraStream();\r\n    this.view.toggleHeaders(false);\r\n  }\r\n  \r\n  _renderView() {\r\n    this.view.render(this.container, this.userData, this.isEditMode);\r\n    this.view.attachEventHandlers(this.handlers);\r\n  }\r\n\r\n  // Generate unique key untuk avatar berdasarkan user\r\n  _getAvatarKey() {\r\n    const userEmail = localStorage.getItem('userEmail');\r\n    const userId = localStorage.getItem('userId');\r\n    const identifier = userEmail || userId || 'default';\r\n    return `userAvatar_${identifier}`;\r\n  }\r\n\r\n  // Store avatar terpisah dengan key per user\r\n  _storeAvatar(avatarData) {\r\n    try {\r\n      const avatarKey = this._getAvatarKey();\r\n      if (avatarData) {\r\n        localStorage.setItem(avatarKey, avatarData);\r\n        console.log(`🖼️ Avatar stored with key: ${avatarKey}`);\r\n      } else {\r\n        localStorage.removeItem(avatarKey);\r\n        console.log(`🖼️ Avatar removed for key: ${avatarKey}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error storing avatar:', error);\r\n    }\r\n  }\r\n\r\n  // Get stored avatar berdasarkan current user\r\n  _getStoredAvatar() {\r\n    try {\r\n      const avatarKey = this._getAvatarKey();\r\n      const avatar = localStorage.getItem(avatarKey);\r\n      console.log(`🖼️ Loading avatar with key: ${avatarKey}, exists: ${!!avatar}`);\r\n      return avatar;\r\n    } catch (error) {\r\n      console.error('Error getting stored avatar:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Load user profile from API - FIXED WITH AVATAR PERSISTENCE\r\n  async _loadUserProfile() {\r\n    try {\r\n      this._showLoading('Loading profile...');\r\n      \r\n      // Debug: Cek token terlebih dahulu\r\n      const token = this.apiService.getAuthToken();\r\n      console.log('🎫 Token check - exists:', !!token);\r\n      console.log('🎫 Token value:', token ? token.substring(0, 20) + '...' : 'null');\r\n      \r\n      if (!token) {\r\n        console.log('❌ No token found, redirecting to signin');\r\n        alert('Session expired. Please login again.');\r\n        window.location.hash = '#/signin';\r\n        return;\r\n      }\r\n      \r\n      // Test koneksi backend dulu\r\n      console.log('🔗 Testing backend connection...');\r\n      const isConnected = await this.apiService.testConnection();\r\n      console.log('🔗 Backend connection:', isConnected);\r\n      \r\n      if (!isConnected) {\r\n        console.log('❌ Backend not reachable, using local data fallback');\r\n        const localData = this._getStoredUserData();\r\n        if (localData) {\r\n          this.userData = localData;\r\n          console.log('✅ Using local profile data as fallback');\r\n          alert('Cannot connect to server. Using offline data.');\r\n        } else {\r\n          alert('Cannot connect to server and no local data available.');\r\n        }\r\n        \r\n        // Load avatar terpisah (tetap load avatar meskipun offline)\r\n        const storedAvatar = this._getStoredAvatar();\r\n        if (storedAvatar) {\r\n          this.userData.avatar = storedAvatar;\r\n          console.log('🖼️ Avatar loaded from separate storage');\r\n        }\r\n        return;\r\n      }\r\n      \r\n      // Coba ambil data dari API\r\n      console.log('📡 Attempting to fetch profile from API...');\r\n      const profileData = await this.apiService.getUserProfile();\r\n      console.log('📦 RAW profile data from API:', JSON.stringify(profileData, null, 2));\r\n      \r\n      // Convert data menggunakan method dari apiService\r\n      console.log('🔄 Converting profile data to frontend format...');\r\n      this.userData = this.apiService.convertToFrontendFormat(profileData);\r\n      console.log('✅ CONVERTED profile data:', JSON.stringify(this.userData, null, 2));\r\n      \r\n      // Load avatar dari storage terpisah (prioritas utama)\r\n      const storedAvatar = this._getStoredAvatar();\r\n      if (storedAvatar) {\r\n        this.userData.avatar = storedAvatar;\r\n        console.log('🖼️ Avatar loaded from separate storage (overriding API)');\r\n      }\r\n      \r\n      console.log('🎯 FINAL userData for rendering:', JSON.stringify(this.userData, null, 2));\r\n      console.log('✅ Profile loaded from API successfully');\r\n      \r\n    } catch (error) {\r\n      console.error('💥 Error loading profile from API:', error);\r\n      \r\n      // Handle specific authentication errors\r\n      if (error.message.includes('Authentication failed') || error.message.includes('401')) {\r\n        console.log('🔒 Authentication failed, clearing tokens and redirecting');\r\n        localStorage.removeItem('isAuthenticated');\r\n        localStorage.removeItem('authToken');\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('userId');\r\n        localStorage.removeItem('userEmail');\r\n        localStorage.removeItem('userData');\r\n        // NOTE: Tidak hapus avatar storage agar tetap tersimpan\r\n        alert('Session expired. Please login again.');\r\n        window.location.hash = '#/signin';\r\n        return;\r\n      }\r\n      \r\n      // Handle profile not found (new user)\r\n      if (error.message.includes('Profile not found') || error.message.includes('404')) {\r\n        console.log('👤 Profile not found - new user, using default data');\r\n        this.userData = {\r\n          name: '',\r\n          gender: 'male',\r\n          age: '',\r\n          weight: '',\r\n          height: '',\r\n          targetWeight: '',\r\n          activityLevel: 'never',\r\n          avatar: null\r\n        };\r\n        \r\n        // Try to get name from stored user data\r\n        const storedEmail = localStorage.getItem('userEmail');\r\n        if (storedEmail) {\r\n          this.userData.name = storedEmail.split('@')[0]; // Use email prefix as default name\r\n        }\r\n        \r\n        // Load avatar untuk user ini jika ada\r\n        const storedAvatar = this._getStoredAvatar();\r\n        if (storedAvatar) {\r\n          this.userData.avatar = storedAvatar;\r\n          console.log('🖼️ Avatar loaded for new user from separate storage');\r\n        }\r\n        \r\n        console.log('ℹ️ Using default profile for new user');\r\n        alert('Welcome! Please complete your profile information.');\r\n        return;\r\n      }\r\n      \r\n      // Fallback ke localStorage jika API gagal\r\n      console.log('🔄 API failed, trying localStorage fallback...');\r\n      const localData = this._getStoredUserData();\r\n      if (localData) {\r\n        this.userData = localData;\r\n        console.log('✅ Using local profile data as fallback');\r\n        alert('Error loading profile from server. Using local data.');\r\n      } else {\r\n        console.log('❌ No local data available, using default profile');\r\n        this.userData = {\r\n          name: '',\r\n          gender: 'male',\r\n          age: '',\r\n          weight: '',\r\n          height: '',\r\n          targetWeight: '',\r\n          activityLevel: 'never',\r\n          avatar: null\r\n        };\r\n        alert('Error loading profile. Please update your information.');\r\n      }\r\n      \r\n      // Load avatar terpisah\r\n      const storedAvatar = this._getStoredAvatar();\r\n      if (storedAvatar) {\r\n        this.userData.avatar = storedAvatar;\r\n        console.log('🖼️ Avatar loaded from separate storage (fallback)');\r\n      }\r\n      \r\n    } finally {\r\n      this._hideLoading();\r\n    }\r\n  }\r\n\r\n  // Save user profile to API - ENHANCED ERROR HANDLING\r\n  async _saveUserProfile(profileData) {\r\n    try {\r\n      this._showLoading('Saving profile...');\r\n      \r\n      console.log('💾 Saving profile data:', JSON.stringify(profileData, null, 2));\r\n      \r\n      const result = await this.apiService.updateUserProfile(profileData);\r\n      console.log('✅ Profile save result:', result);\r\n      \r\n      // Tetap simpan ke localStorage sebagai backup (tidak termasuk avatar)\r\n      this._storeUserData();\r\n      console.log('💾 Profile also saved to localStorage as backup');\r\n      \r\n      // Simpan avatar terpisah\r\n      this._storeAvatar(profileData.avatar);\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('💥 Error saving profile to API:', error);\r\n      \r\n      // Handle different types of errors\r\n      if (error.message.includes('Authentication failed')) {\r\n        alert('Session expired. Please login again.');\r\n        this._handleSignOut();\r\n        return false;\r\n      }\r\n      \r\n      // Fallback: simpan hanya ke localStorage\r\n      this._storeUserData();\r\n      this._storeAvatar(profileData.avatar);\r\n      console.log('💾 Fallback: Profile saved to localStorage only');\r\n      \r\n      // Show more specific error message\r\n      const errorMsg = error.message.includes('connect') \r\n        ? 'Cannot connect to server. Profile saved locally only.'\r\n        : `Server error: ${error.message}. Profile saved locally only.`;\r\n      \r\n      alert(errorMsg);\r\n      \r\n      // Return true because we saved locally\r\n      return true;\r\n    } finally {\r\n      this._hideLoading();\r\n    }\r\n  }\r\n  \r\n  _getStoredUserData() {\r\n    const storedData = localStorage.getItem('userData');\r\n    if (storedData) {\r\n      try {\r\n        const parsedData = JSON.parse(storedData);\r\n        return {\r\n          name: parsedData.name || '',\r\n          gender: parsedData.gender || 'male',\r\n          age: parsedData.age || '',\r\n          weight: parsedData.weight || '',\r\n          height: parsedData.height || '',\r\n          targetWeight: parsedData.targetWeight || '',\r\n          activityLevel: parsedData.activityLevel || 'never',\r\n          avatar: null // Avatar tidak disimpan di userData lagi\r\n        };\r\n      } catch (error) {\r\n        console.error('Error parsing stored user data:', error);\r\n        return null;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  \r\n  _storeUserData() {\r\n    try {\r\n      // Simpan data tanpa avatar (avatar disimpan terpisah)\r\n      const dataToStore = {\r\n        name: this.userData.name,\r\n        gender: this.userData.gender,\r\n        age: this.userData.age,\r\n        weight: this.userData.weight,\r\n        height: this.userData.height,\r\n        targetWeight: this.userData.targetWeight,\r\n        activityLevel: this.userData.activityLevel\r\n        // avatar tidak disimpan di sini\r\n      };\r\n      \r\n      localStorage.setItem('userData', JSON.stringify(dataToStore));\r\n      console.log('💾 User data stored to localStorage (without avatar)');\r\n    } catch (error) {\r\n      console.error('Error storing user data:', error);\r\n    }\r\n  }\r\n  \r\n  _handleEditAvatarClicked() {\r\n    this.view.showAvatarOptions();\r\n  }\r\n  \r\n  async _handleCameraOptionClicked() {\r\n    this.view.hideAvatarOptions();\r\n    \r\n    try {\r\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n        alert('Camera is not supported on this device/browser');\r\n        return;\r\n      }\r\n\r\n      this.view.showCameraModal();\r\n      \r\n      this.cameraStream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { \r\n          width: { ideal: 640 },\r\n          height: { ideal: 480 },\r\n          facingMode: 'user'\r\n        } \r\n      });\r\n      \r\n      const video = document.getElementById('camera-video');\r\n      if (video) {\r\n        video.srcObject = this.cameraStream;\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Error accessing camera:', error);\r\n      alert(`Camera access failed: ${error.message}`);\r\n      this.view.hideCameraModal();\r\n    }\r\n  }\r\n  \r\n  _handleGalleryOptionClicked() {\r\n    this.view.hideAvatarOptions();\r\n    \r\n    const fileInput = document.getElementById('file-input');\r\n    if (fileInput) {\r\n      fileInput.click();\r\n    }\r\n  }\r\n\r\n  async _handleFileSelected(event) {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    if (!this.view.validateImageFile(file)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this._showLoading('Processing image...');\r\n\r\n      const resizedBlob = await this.view.resizeImage(file);\r\n      \r\n      const base64Data = await this.view.blobToBase64(resizedBlob);\r\n      \r\n      this._updateAvatar(base64Data);\r\n      \r\n      this._hideLoading();\r\n      \r\n      event.target.value = '';\r\n      \r\n    } catch (error) {\r\n      console.error('Error processing image:', error);\r\n      alert('Failed to process image. Please try again.');\r\n      this._hideLoading();\r\n    }\r\n  }\r\n\r\n  _handleCameraModalClose() {\r\n    this._stopCameraStream();\r\n    this.view.hideCameraModal();\r\n    this._resetCameraModal();\r\n  }\r\n\r\n  _handleCameraCapture() {\r\n    const video = document.getElementById('camera-video');\r\n    const canvas = document.getElementById('camera-preview-canvas');\r\n    \r\n    if (!video || !canvas) return;\r\n\r\n    const ctx = canvas.getContext('2d');\r\n    \r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n    \r\n    ctx.drawImage(video, 0, 0);\r\n    \r\n    this.capturedImageData = canvas.toDataURL('image/jpeg', 0.8);\r\n    \r\n    canvas.style.display = 'block';\r\n    video.style.display = 'none';\r\n    \r\n    document.getElementById('camera-capture-btn').style.display = 'none';\r\n    document.getElementById('camera-retake-btn').style.display = 'inline-block';\r\n    document.getElementById('camera-use-btn').style.display = 'inline-block';\r\n  }\r\n\r\n  _handleCameraRetake() {\r\n    const video = document.getElementById('camera-video');\r\n    const canvas = document.getElementById('camera-preview-canvas');\r\n    \r\n    if (video && canvas) {\r\n      video.style.display = 'block';\r\n      canvas.style.display = 'none';\r\n      \r\n      document.getElementById('camera-capture-btn').style.display = 'inline-block';\r\n      document.getElementById('camera-retake-btn').style.display = 'none';\r\n      document.getElementById('camera-use-btn').style.display = 'none';\r\n      \r\n      this.capturedImageData = null;\r\n    }\r\n  }\r\n\r\n  _handleCameraUse() {\r\n    if (this.capturedImageData) {\r\n      this._updateAvatar(this.capturedImageData);\r\n      \r\n      this._handleCameraModalClose();\r\n    }\r\n  }\r\n\r\n  _updateAvatar(imageData) {\r\n    this.userData.avatar = imageData;\r\n    \r\n    const avatarImg = document.getElementById('user-avatar');\r\n    if (avatarImg) {\r\n      avatarImg.src = imageData;\r\n    }\r\n    \r\n    // Simpan avatar ke storage terpisah per user\r\n    this._storeAvatar(imageData);\r\n    console.log('🖼️ Avatar updated and stored for current user');\r\n  }\r\n\r\n  _stopCameraStream() {\r\n    if (this.cameraStream) {\r\n      const tracks = this.cameraStream.getTracks();\r\n      tracks.forEach(track => track.stop());\r\n      this.cameraStream = null;\r\n    }\r\n  }\r\n\r\n  _resetCameraModal() {\r\n    const video = document.getElementById('camera-video');\r\n    const canvas = document.getElementById('camera-preview-canvas');\r\n    \r\n    if (video) {\r\n      video.style.display = 'block';\r\n    }\r\n    \r\n    if (canvas) {\r\n      canvas.style.display = 'none';\r\n    }\r\n    \r\n    const captureBtn = document.getElementById('camera-capture-btn');\r\n    const retakeBtn = document.getElementById('camera-retake-btn');\r\n    const useBtn = document.getElementById('camera-use-btn');\r\n    \r\n    if (captureBtn) captureBtn.style.display = 'inline-block';\r\n    if (retakeBtn) retakeBtn.style.display = 'none';\r\n    if (useBtn) useBtn.style.display = 'none';\r\n    \r\n    this.capturedImageData = null;\r\n  }\r\n\r\n  _showLoading(message = 'Loading...') {\r\n    const loadingDiv = document.createElement('div');\r\n    loadingDiv.id = 'loading-overlay';\r\n    loadingDiv.innerHTML = `\r\n      <div style=\"\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: rgba(0,0,0,0.5);\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        z-index: 1000;\r\n        color: white;\r\n        font-size: 18px;\r\n      \">\r\n        <div style=\"\r\n          background: white;\r\n          color: #333;\r\n          padding: 20px;\r\n          border-radius: 10px;\r\n          text-align: center;\r\n        \">\r\n          <div style=\"margin-bottom: 10px;\">⏳</div>\r\n          ${message}\r\n        </div>\r\n      </div>\r\n    `;\r\n    document.body.appendChild(loadingDiv);\r\n  }\r\n\r\n  _hideLoading() {\r\n    const loadingDiv = document.getElementById('loading-overlay');\r\n    if (loadingDiv) {\r\n      loadingDiv.remove();\r\n    }\r\n  }\r\n  \r\n  _handleGenderOptionClicked(gender) {\r\n    this.view.toggleGenderOption(gender);\r\n  }\r\n  \r\n  _handleUpdateDataClicked() {\r\n    this.isEditMode = true;\r\n    this._renderView();\r\n  }\r\n  \r\n  async _handleSaveDataClicked() {\r\n    const newUserData = this.view.getUserData();\r\n    if (newUserData) {\r\n      // Update userData dengan data baru\r\n      this.userData = {\r\n        ...this.userData,\r\n        ...newUserData\r\n      };\r\n      \r\n      // Simpan ke API dan localStorage\r\n      const success = await this._saveUserProfile(this.userData);\r\n      \r\n      this.isEditMode = false;\r\n      this._renderView();\r\n      \r\n      if (success) {\r\n        alert('Profile updated successfully!');\r\n      } else {\r\n        alert('Failed to save profile. Please try again.');\r\n      }\r\n    }\r\n  }\r\n  \r\n  _handleSignOutClicked() {\r\n    if (confirm('Are you sure you want to sign out?')) {\r\n      this._handleSignOut();\r\n    }\r\n  }\r\n\r\n  _handleSignOut() {\r\n    // Clear semua data authentication dan userData\r\n    localStorage.removeItem('isAuthenticated');\r\n    localStorage.removeItem('authToken');\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('userId');\r\n    localStorage.removeItem('userEmail');\r\n    localStorage.removeItem('userData');\r\n    \r\n    // NOTE: Avatar tidak dihapus karena disimpan dengan key per user\r\n    // Sehingga saat user login kembali, avatar tetap ada\r\n    \r\n    console.log('🚪 User signed out, authentication data cleared');\r\n    console.log('🖼️ Avatar preserved for future login');\r\n    window.location.hash = '#/signin';\r\n  }\r\n  \r\n  _handleNumberIncrease(inputId) {\r\n    const input = document.getElementById(inputId);\r\n    if (input) {\r\n      const currentValue = parseInt(input.value) || 0;\r\n      const max = parseInt(input.getAttribute('max')) || Infinity;\r\n      if (currentValue < max) {\r\n        input.value = currentValue + 1;\r\n      }\r\n    }\r\n  }\r\n  \r\n  _handleNumberDecrease(inputId) {\r\n    const input = document.getElementById(inputId);\r\n    if (input) {\r\n      const currentValue = parseInt(input.value) || 0;\r\n      const min = parseInt(input.getAttribute('min')) || 0;\r\n      if (currentValue > min) {\r\n        input.value = currentValue - 1;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default ProfilePresenter;","import ProfilePresenter from './profile-presenter';\r\n\r\nconst profile = {\r\n  async render() {\r\n    return `\r\n      <div class=\"page-outer-wrapper\">\r\n        <div class=\"page-inner-wrapper\">\r\n          <div id=\"profile-container\" class=\"profile-container\">\r\n            <h1>Loading profile...</h1>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  },\r\n\r\n  async afterRender() {\r\n    const container = document.getElementById('profile-container');\r\n    const profilePresenter = new ProfilePresenter({ container });\r\n    await profilePresenter.init();\r\n    \r\n    // Simpan reference ke presenter untuk cleanup\r\n    this.presenter = profilePresenter;\r\n  },\r\n\r\n  // Method untuk cleanup ketika leave profile page\r\n  onLeave() {\r\n    if (this.presenter && this.presenter.onLeave) {\r\n      this.presenter.onLeave();\r\n    }\r\n  }\r\n};\r\n\r\nexport default profile;"],"names":["_regeneratorRuntime","r","t","e","Object","prototype","n","hasOwnProperty","o","Symbol","i","iterator","a","asyncIterator","u","toStringTag","c","defineProperty","value","enumerable","configurable","writable","h","Generator","create","Error","done","method","arg","delegate","d","f","sent","_sent","dispatchException","abrupt","s","type","Context","call","wrap","GeneratorFunction","GeneratorFunctionPrototype","l","p","getPrototypeOf","y","x","v","g","forEach","_invoke","AsyncIterator","_typeof","resolve","__await","then","TypeError","next","w","tryEntries","push","m","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","unshift","pop","values","prev","charAt","slice","stop","rval","complete","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","_defineProperties","_toPropertyKey","key","toPrimitive","String","Number","_toPrimitive","ProfilePresenter","_ref","container","_classCallCheck","this","view","ProfileView","apiService","ProfileApiService","isEditMode","cameraStream","capturedImageData","userData","gender","age","weight","height","targetWeight","activityLevel","avatar","handlers","onEditAvatarClicked","_handleEditAvatarClicked","bind","onCameraOptionClicked","_handleCameraOptionClicked","onGalleryOptionClicked","_handleGalleryOptionClicked","onFileSelected","_handleFileSelected","onCameraModalClose","_handleCameraModalClose","onCameraCapture","_handleCameraCapture","onCameraRetake","_handleCameraRetake","onCameraUse","_handleCameraUse","onGenderOptionClicked","_handleGenderOptionClicked","onUpdateDataClicked","_handleUpdateDataClicked","onSaveDataClicked","_handleSaveDataClicked","onSignOutClicked","_handleSignOutClicked","onNumberIncrease","_handleNumberIncrease","onNumberDecrease","_handleNumberDecrease","_init","_callee","_context","toggleHeaders","_loadUserProfile","_renderView","_stopCameraStream","render","attachEventHandlers","userEmail","localStorage","getItem","userId","concat","avatarData","avatarKey","_getAvatarKey","setItem","console","log","removeItem","error","_loadUserProfile2","_callee2","token","isConnected","localData","_storedAvatar","profileData","storedAvatar","storedEmail","_storedAvatar2","_localData","_storedAvatar3","_context2","_showLoading","getAuthToken","substring","alert","window","location","hash","testConnection","_getStoredUserData","_getStoredAvatar","getUserProfile","JSON","stringify","convertToFrontendFormat","t0","message","includes","split","_hideLoading","_saveUserProfile2","_callee3","result","errorMsg","_context3","updateUserProfile","_storeUserData","_storeAvatar","_handleSignOut","_x","storedData","parsedData","parse","dataToStore","showAvatarOptions","_handleCameraOptionClicked2","_callee4","video","_context4","hideAvatarOptions","navigator","mediaDevices","getUserMedia","showCameraModal","width","ideal","facingMode","document","getElementById","srcObject","hideCameraModal","fileInput","click","_handleFileSelected2","_callee5","event","file","resizedBlob","base64Data","_context5","target","files","validateImageFile","resizeImage","blobToBase64","_updateAvatar","_x2","_resetCameraModal","canvas","ctx","getContext","videoWidth","videoHeight","drawImage","toDataURL","style","display","imageData","avatarImg","src","getTracks","track","captureBtn","retakeBtn","useBtn","undefined","loadingDiv","createElement","id","innerHTML","body","appendChild","remove","toggleGenderOption","_handleSaveDataClicked2","_callee6","newUserData","success","_context6","getUserData","_objectSpread","_saveUserProfile","confirm","inputId","input","currentValue","parseInt","getAttribute","Infinity","afterRender","_this","profilePresenter","init","presenter","onLeave"],"sourceRoot":""}