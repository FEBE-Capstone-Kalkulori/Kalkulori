/*! For license information please see app~fc2771c0.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkkalkulori=self.webpackChunkkalkulori||[]).push([[547],{774:(e,t,r)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function n(){n=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(e,t,r,a){return Object.defineProperty(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a})}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function p(t,r,a,n){var o=r&&r.prototype instanceof f?r:f,s=Object.create(o.prototype);return u(s,"_invoke",function(t,r,a){var n=1;return function(o,s){if(3===n)throw Error("Generator is already running");if(4===n){if("throw"===o)throw s;return{value:e,done:!0}}for(a.method=o,a.arg=s;;){var i=a.delegate;if(i){var c=E(i,a);if(c){if(c===d)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(1===n)throw n=4,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=3;var l=h(t,r,a);if("normal"===l.type){if(n=a.done?4:2,l.arg===d)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(n=4,a.method="throw",a.arg=l.arg)}}}(t,a,new T(n||[])),!0),s}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var d={};function f(){}function g(){}function m(){}var y={};u(y,i,(function(){return this}));var w=Object.getPrototypeOf,v=w&&w(w(A([])));v&&v!==r&&o.call(v,i)&&(y=v);var k=m.prototype=f.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(n,s,i,c){var l=h(e[n],e,s);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==a(p)&&o.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(p).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var n;u(this,"_invoke",(function(e,a){function o(){return new t((function(t,n){r(e,a,t,n)}))}return n=n?n.then(o,o):o()}),!0)}function E(t,r){var a=r.method,n=t.i[a];if(n===e)return r.delegate=null,"throw"===a&&t.i.return&&(r.method="return",r.arg=e,E(t,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var o=h(n,t.i,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var s=o.arg;return s?s.done?(r[t.r]=s.value,r.next=t.n,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function _(e){this.tryEntries.push(e)}function P(t){var r=t[4]||{};r.type="normal",r.arg=e,t[4]=r}function T(e){this.tryEntries=[[-1]],e.forEach(_,this),this.reset(!0)}function A(t){if(null!=t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(a(t)+" is not iterable")}return g.prototype=m,u(k,"constructor",m),u(m,"constructor",g),g.displayName=u(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},b(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,a,n,o){void 0===o&&(o=Promise);var s=new x(p(e,r,a,n),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(k),u(k,l,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var a in t)r.unshift(a);return function e(){for(;r.length;)if((a=r.pop())in t)return e.value=a,e.done=!1,e;return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(e){s.type="throw",s.arg=t,r.next=e}for(var n=r.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o[4],i=this.prev,c=o[1],l=o[2];if(-1===o[0])return a("end"),!1;if(!c&&!l)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=i){if(i<c)return this.method="next",this.arg=e,a(c),!0;if(i<l)return a(l),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a[0]>-1&&a[0]<=this.prev&&this.prev<a[2]){var n=a;break}}n&&("break"===e||"continue"===e)&&n[0]<=t&&t<=n[2]&&(n=null);var o=n?n[4]:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n[2],d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),P(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var a=r[4];if("throw"===a.type){var n=a.arg;P(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,a){return this.delegate={i:A(t),r,n:a},"next"===this.method&&(this.arg=e),d}},t}function o(e,t,r,a,n,o,s){try{var i=e[o](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(a,n)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var s=e.apply(t,r);function i(e){o(s,a,n,i,c,"next",e)}function c(e){o(s,a,n,i,c,"throw",e)}i(void 0)}))}}function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,c(a.key),a)}}function c(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}r.d(t,{A:()=>u});var l=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl="https://kalkulori.up.railway.app/api"},t=[{key:"createMealEntry",value:(w=s(n().mark((function e(t){var r,a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem("authToken"),e.next=4,fetch("".concat(this.baseUrl,"/meals"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(t)});case 4:if((a=e.sent).ok){e.next=7;break}throw new Error("HTTP error! status: ".concat(a.status));case 7:return e.next=9,a.json();case 9:if("success"!==(o=e.sent).status){e.next=14;break}return e.abrupt("return",o.data);case 14:throw new Error(o.message||"Failed to create meal entry");case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(0),console.error("Error creating meal entry:",e.t0),e.t0;case 21:case"end":return e.stop()}}),e,this,[[0,17]])}))),function(e){return w.apply(this,arguments)})},{key:"getMealEntries",value:(y=s(n().mark((function e(){var t,r,a,o,s,i,c=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.prev=1,r=localStorage.getItem("authToken"),a=new URLSearchParams,t.log_date&&a.append("log_date",t.log_date),t.meal_type&&a.append("meal_type",t.meal_type),o="".concat(this.baseUrl,"/meals/updated").concat(a.toString()?"?"+a.toString():""),e.next=9,fetch(o,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 9:if((s=e.sent).ok){e.next=12;break}throw new Error("HTTP error! status: ".concat(s.status));case 12:return e.next=14,s.json();case 14:if("success"!==(i=e.sent).status){e.next=19;break}return e.abrupt("return",i.data.meal_entries);case 19:throw new Error(i.message||"Failed to fetch meal entries");case 20:e.next=26;break;case 22:throw e.prev=22,e.t0=e.catch(1),console.error("Error fetching meal entries:",e.t0),e.t0;case 26:case"end":return e.stop()}}),e,this,[[1,22]])}))),function(){return y.apply(this,arguments)})},{key:"getDailyLog",value:(m=s(n().mark((function e(t){var r,a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem("authToken"),e.next=4,fetch("".concat(this.baseUrl,"/logs/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 4:if(404!==(a=e.sent).status){e.next=8;break}return console.log("No data for date:",t,"- returning empty"),e.abrupt("return",{daily_log:{total_calories_consumed:0,total_protein_consumed:0,total_carbs_consumed:0,total_fat_consumed:0,remaining_calories:1500},meal_entries:[]});case 8:if(a.ok){e.next=10;break}throw new Error("HTTP error! status: ".concat(a.status));case 10:return e.next=12,a.json();case 12:if("success"!==(o=e.sent).status){e.next=17;break}return e.abrupt("return",o.data);case 17:throw new Error(o.message||"Failed to fetch daily log");case 18:e.next=26;break;case 20:if(e.prev=20,e.t0=e.catch(0),!e.t0.message.includes("404")){e.next=24;break}return e.abrupt("return",{daily_log:{total_calories_consumed:0,total_protein_consumed:0,total_carbs_consumed:0,total_fat_consumed:0,remaining_calories:1500},meal_entries:[]});case 24:throw console.error("Error fetching daily log:",e.t0),e.t0;case 26:case"end":return e.stop()}}),e,this,[[0,20]])}))),function(e){return m.apply(this,arguments)})},{key:"updateMealEntry",value:(g=s(n().mark((function e(t,r){var a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("authToken"),e.next=4,fetch("".concat(this.baseUrl,"/meals/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(r)});case 4:if((o=e.sent).ok){e.next=7;break}throw new Error("HTTP error! status: ".concat(o.status));case 7:return e.next=9,o.json();case 9:if("success"!==(s=e.sent).status){e.next=14;break}return e.abrupt("return",s);case 14:throw new Error(s.message||"Failed to update meal entry");case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(0),console.error("Error updating meal entry:",e.t0),e.t0;case 21:case"end":return e.stop()}}),e,this,[[0,17]])}))),function(e,t){return g.apply(this,arguments)})},{key:"deleteMealEntry",value:(f=s(n().mark((function e(t){var r,a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem("authToken"),e.next=4,fetch("".concat(this.baseUrl,"/meals/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 4:if((a=e.sent).ok){e.next=7;break}throw new Error("HTTP error! status: ".concat(a.status));case 7:return e.next=9,a.json();case 9:if("success"!==(o=e.sent).status){e.next=14;break}return e.abrupt("return",o);case 14:throw new Error(o.message||"Failed to delete meal entry");case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(0),console.error("Error deleting meal entry:",e.t0),e.t0;case 21:case"end":return e.stop()}}),e,this,[[0,17]])}))),function(e){return f.apply(this,arguments)})},{key:"generateMealPlan",value:(d=s(n().mark((function e(){var t,r,o,s,i,c,l,u,p,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=localStorage.getItem("authToken"),console.log("🚀 Calling meal plan API..."),t){e.next=5;break}throw new Error("Authentication token not found. Please login again.");case 5:return e.next=7,fetch("".concat(this.baseUrl,"/meal-plans/generate"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 7:return r=e.sent,e.prev=8,e.next=11,r.json();case 11:o=e.sent,e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(8),console.error("🚨 Failed to parse response as JSON:",e.t0),new Error("Invalid response from server. Please try again.");case 18:if(console.log("🔍 Meal Plan API Response:",{status:r.status,ok:r.ok,data:o}),r.ok){e.next=24;break}throw s=o.message||"Failed to generate meal plan",401===r.status?s="Authentication failed. Please login again.":404===r.status?s="Profile not found. Please complete your profile first.":400===r.status?s=o.message&&o.message.includes("calorie target")?"Daily calorie target not set. Please update your profile.":o.message||"Bad request. Please check your profile settings.":500===r.status?s="Server error. Please check your profile settings or try again later.":503===r.status?s="Meal plan service temporarily unavailable. Please try again later.":504===r.status&&(s="Request timeout. The service is taking too long to respond."),console.error("🚨 Meal Plan API Error:",{status:r.status,message:s,details:o,url:"".concat(this.baseUrl,"/meal-plans/generate")}),new Error(s);case 24:if("success"!==o.status){e.next=68;break}if(console.log("✅ Meal Plan API Success - validating data structure..."),o.data){e.next=29;break}throw console.error("❌ Missing data in successful response:",o),new Error("Invalid response: missing data");case 29:if(o.data.meal_plans){e.next=32;break}throw console.error("❌ Missing meal_plans in response data:",o.data),new Error("Invalid response: missing meal_plans");case 32:if(Array.isArray(o.data.meal_plans)){e.next=35;break}throw console.error("❌ meal_plans is not an array:",a(o.data.meal_plans),o.data.meal_plans),new Error("Invalid response: meal_plans should be an array");case 35:if(0!==o.data.meal_plans.length){e.next=38;break}throw console.error("❌ Empty meal_plans array:",o.data.meal_plans),new Error("No meal plans generated. Please try again.");case 38:if((i=o.data.meal_plans[0])&&"object"===a(i)){e.next=42;break}throw console.error("❌ Invalid first meal plan:",i),new Error("Invalid meal plan data structure");case 42:if(c=["breakfast","lunch","dinner","Breakfast","Lunch","Dinner","BREAKFAST","LUNCH","DINNER"],console.log("🔍 Checking for meals in plan. Available keys:",Object.keys(i)),l=[],c.forEach((function(e){i[e]&&(l.push(e),console.log("✅ Found meal type: ".concat(e),i[e]))})),u=Object.keys(i),p=u.filter((function(e){var t=e.toLowerCase();return t.includes("breakfast")||t.includes("lunch")||t.includes("dinner")||t.includes("meal")})),console.log("🔍 Meal-like keys found:",p),console.log("🔍 All plan keys:",u),h=l.length>0||p.length>0){e.next=57;break}throw console.error("❌ No valid meals in plan:"),console.error("First plan structure:",JSON.stringify(i,null,2)),console.error("Expected meal types:",c),console.error("Available keys:",u),new Error("Generated meal plan contains no valid meals");case 57:return console.log("✅ Found ".concat(l.length," standard meals and ").concat(p.length," meal-like keys")),console.log("✅ Response validation passed:"),console.log("  - Data exists:",!!o.data),console.log("  - meal_plans exists:",!!o.data.meal_plans),console.log("  - meal_plans is array:",Array.isArray(o.data.meal_plans)),console.log("  - meal_plans length:",o.data.meal_plans.length),console.log("  - First plan structure:",Object.keys(i)),console.log("  - Has meals:",h),e.abrupt("return",o.data);case 68:throw console.error("❌ API returned non-success status:",o.status,o.message),new Error(o.message||"Failed to generate meal plan");case 70:e.next=82;break;case 72:if(e.prev=72,e.t1=e.catch(0),"TypeError"!==e.t1.name||!e.t1.message.includes("fetch")){e.next=77;break}throw console.error("🌐 Network error detected:",e.t1),new Error("Network error. Please check your internet connection.");case 77:if(!e.t1.message.includes("Authentication")){e.next=80;break}throw console.error("🔐 Authentication error:",e.t1),e.t1;case 80:throw console.error("💥 Generate Meal Plan Error:",{name:e.t1.name,message:e.t1.message,stack:e.t1.stack}),e.t1;case 82:case"end":return e.stop()}}),e,this,[[0,72],[8,14]])}))),function(){return d.apply(this,arguments)})},{key:"convertMealToEntry",value:(h=s(n().mark((function e(t,r,a){var o,s,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=t,!t.recipe_id&&!t.id){e.next=13;break}return e.prev=3,s=t.recipe_id||t.id,e.next=7,this.getMealDetails(s);case 7:o=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.warn("Could not fetch detailed meal info, using basic data:",e.t0);case 13:return i={food_item_id:o.id||o.recipe_id||"meal_plan_".concat(Date.now()),meal_type:r.toLowerCase(),servings:o.serving_size||1,log_date:a},e.next=16,this.createMealEntry(i);case 16:return e.abrupt("return",e.sent);case 19:throw e.prev=19,e.t1=e.catch(0),console.error("Error converting meal to entry:",e.t1),e.t1;case 23:case"end":return e.stop()}}),e,this,[[0,19],[3,10]])}))),function(e,t,r){return h.apply(this,arguments)})},{key:"getMealSuggestions",value:(p=s(n().mark((function e(t){var r,a,o,s,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=localStorage.getItem("authToken"),t&&0!==t.length){e.next=4;break}throw new Error("At least 1 keyword is required");case 4:if(!(t.length>6)){e.next=6;break}throw new Error("Maximum 6 keywords allowed");case 6:return a=t.join(","),e.next=9,fetch("".concat(this.baseUrl,"/meals/suggestion?keywords=").concat(encodeURIComponent(a)),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 9:return o=e.sent,e.next=12,o.json();case 12:if(s=e.sent,console.log("🔍 Meal Suggestions API Response:",{status:o.status,data:s}),o.ok){e.next=19;break}throw i=s.message||"Failed to get meal suggestions",404===o.status?i="Profile not found. Please complete your profile first.":400===o.status?i=s.message||"Invalid request parameters":503===o.status?i="Meal suggestion service temporarily unavailable":504===o.status&&(i="Request timeout. Please try again."),console.error("🚨 Meal Suggestions API Error:",{status:o.status,message:i}),new Error(i);case 19:if("success"!==s.status){e.next=23;break}return e.abrupt("return",s.data);case 23:throw new Error(s.message||"Failed to get meal suggestions");case 24:e.next=32;break;case 26:if(e.prev=26,e.t0=e.catch(0),"TypeError"!==e.t0.name&&!e.t0.message.includes("fetch")){e.next=30;break}throw new Error("Network error. Please check your internet connection.");case 30:throw console.error("💥 Get Meal Suggestions Error:",e.t0),e.t0;case 32:case"end":return e.stop()}}),e,this,[[0,26]])}))),function(e){return p.apply(this,arguments)})},{key:"getMealDetails",value:(u=s(n().mark((function e(t){var r,a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=localStorage.getItem("authToken"),t){e.next=4;break}throw new Error("Recipe ID is required");case 4:return e.next=6,fetch("".concat(this.baseUrl,"/meals/").concat(t,"/details"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 6:return a=e.sent,e.next=9,a.json();case 9:if(o=e.sent,console.log("🔍 Meal Details API Response:",{status:a.status,data:o}),a.ok){e.next=16;break}throw s=o.message||"Failed to get meal details",404===a.status?s="Recipe not found":503===a.status?s="Meal service temporarily unavailable":504===a.status&&(s="Request timeout. Please try again."),console.error("🚨 Meal Details API Error:",{status:a.status,message:s}),new Error(s);case 16:if("success"!==o.status){e.next=20;break}return e.abrupt("return",o.data);case 20:throw new Error(o.message||"Failed to get meal details");case 21:e.next=29;break;case 23:if(e.prev=23,e.t0=e.catch(0),"TypeError"!==e.t0.name&&!e.t0.message.includes("fetch")){e.next=27;break}throw new Error("Network error. Please check your internet connection.");case 27:throw console.error("💥 Get Meal Details Error:",e.t0),e.t0;case 29:case"end":return e.stop()}}),e,this,[[0,23]])}))),function(e){return u.apply(this,arguments)})},{key:"addMealFromSuggestion",value:(l=s(n().mark((function e(t){var r,a,o,s,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=localStorage.getItem("authToken"),t.recipe_id&&t.meal_type&&t.log_date){e.next=4;break}throw new Error("Recipe ID, meal type, and log date are required");case 4:return a={recipe_id:t.recipe_id,meal_type:t.meal_type,servings:t.servings||1,log_date:t.log_date},e.next=7,fetch("".concat(this.baseUrl,"/meals/suggestion/add"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)});case 7:return o=e.sent,e.next=10,o.json();case 10:if(s=e.sent,console.log("🔍 Add Meal From Suggestion API Response:",{status:o.status,data:s}),o.ok){e.next=17;break}throw i=s.message||"Failed to add meal from suggestion",404===o.status?i="Recipe not found or profile incomplete":400===o.status?i=s.message||"Invalid meal data":503===o.status&&(i="Meal service temporarily unavailable"),console.error("🚨 Add Meal From Suggestion Error:",{status:o.status,message:i}),new Error(i);case 17:if("success"!==s.status){e.next=21;break}return e.abrupt("return",s.data);case 21:throw new Error(s.message||"Failed to add meal from suggestion");case 22:e.next=30;break;case 24:if(e.prev=24,e.t0=e.catch(0),"TypeError"!==e.t0.name&&!e.t0.message.includes("fetch")){e.next=28;break}throw new Error("Network error. Please check your internet connection.");case 28:throw console.error("💥 Add Meal From Suggestion Error:",e.t0),e.t0;case 30:case"end":return e.stop()}}),e,this,[[0,24]])}))),function(e){return l.apply(this,arguments)})},{key:"addMealFromPlan",value:(c=s(n().mark((function e(t){var r,a,o,s,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=localStorage.getItem("authToken"),t.recipe_id&&t.meal_type&&t.log_date){e.next=4;break}throw new Error("Recipe ID, meal type, and log date are required");case 4:return a={recipe_id:t.recipe_id,meal_type:t.meal_type,servings:t.servings||1,log_date:t.log_date},console.log("🚀 Adding meal from plan - Request data:",a),console.log("🚀 Using endpoint:","".concat(this.baseUrl,"/meals/suggestion/add")),e.next=9,fetch("".concat(this.baseUrl,"/meals/suggestion/add"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)});case 9:return o=e.sent,e.next=12,o.json();case 12:if(s=e.sent,console.log("🔍 Add Meal From Plan API Response:",{status:o.status,data:s}),o.ok){e.next=19;break}throw i=s.message||"Failed to add meal from plan",404===o.status?i="Recipe not found or profile incomplete":400===o.status?i=s.message||"Invalid meal data":503===o.status&&(i="Meal service temporarily unavailable"),console.error("🚨 Add Meal From Plan Error:",{status:o.status,message:i}),new Error(i);case 19:if("success"!==s.status){e.next=23;break}return e.abrupt("return",s.data);case 23:throw new Error(s.message||"Failed to add meal from plan");case 24:e.next=33;break;case 26:if(e.prev=26,e.t0=e.catch(0),"TypeError"!==e.t0.name&&!e.t0.message.includes("fetch")){e.next=31;break}throw console.error("🌐 Network error details:",e.t0),new Error("Network error. Please check your internet connection.");case 31:throw console.error("💥 Add Meal From Plan Error:",e.t0),e.t0;case 33:case"end":return e.stop()}}),e,this,[[0,26]])}))),function(e){return c.apply(this,arguments)})},{key:"addFullMealPlan",value:(o=s(n().mark((function e(t){var r,a,o,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=localStorage.getItem("authToken"),t.meal_plan&&t.log_date){e.next=4;break}throw new Error("Meal plan and log date are required");case 4:return console.log("🚀 Adding full meal plan - Request data:",t),console.log("🚀 Using endpoint:","".concat(this.baseUrl,"/meal-plans/add-full")),e.next=8,fetch("".concat(this.baseUrl,"/meal-plans/add-full"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(t)});case 8:return a=e.sent,console.log("🔍 Response status:",a.status),console.log("🔍 Response ok:",a.ok),e.prev=11,e.next=14,a.json();case 14:o=e.sent,console.log("🔍 Add Full Meal Plan API Response:",{status:a.status,data:o}),e.next=22;break;case 18:throw e.prev=18,e.t0=e.catch(11),console.error("🚨 Failed to parse response as JSON:",e.t0),new Error("Invalid response format from server");case 22:if(a.ok){e.next=27;break}throw s=o.message||"Failed to add full meal plan",404===a.status?s="Endpoint not found":400===a.status?s=o.message||"Invalid meal plan data":503===a.status&&(s="Meal service temporarily unavailable"),console.error("🚨 Add Full Meal Plan Error:",{status:a.status,message:s,response:o}),new Error(s);case 27:if("success"!==o.status){e.next=31;break}return e.abrupt("return",o.data);case 31:throw new Error(o.message||"Failed to add full meal plan");case 32:e.next=43;break;case 34:if(e.prev=34,e.t1=e.catch(0),"TypeError"!==e.t1.name&&!e.t1.message.includes("fetch")){e.next=41;break}throw console.error("🌐 Network error details:",e.t1),console.error("🌐 Base URL:",this.baseUrl),console.error("🌐 Full URL:","".concat(this.baseUrl,"/meal-plans/add-full")),new Error("Network error. Please check your internet connection.");case 41:throw console.error("💥 Add Full Meal Plan Error:",e.t1),e.t1;case 43:case"end":return e.stop()}}),e,this,[[0,34],[11,18]])}))),function(e){return o.apply(this,arguments)})}],t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,o,c,l,u,p,h,d,f,g,m,y,w}());"undefined"!=typeof window&&(window.mealApiService=l);const u=l}}]);
//# sourceMappingURL=app~fc2771c0.bundle.js.map