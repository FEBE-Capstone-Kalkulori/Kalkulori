/*! For license information please see app~4a2de6a5.bundle.js.LICENSE.txt */
(self.webpackChunkkalkulori=self.webpackChunkkalkulori||[]).push([[450],{647:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(){"use strict";n=function(){return r};var e,r={},o=Object.prototype,a=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function d(e,t,n,r){return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r})}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function u(t,n,r,o){var a=n&&n.prototype instanceof g?n:g,i=Object.create(a.prototype);return d(i,"_invoke",function(t,n,r){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var l=k(s,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===o)throw o=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=3;var c=p(t,n,r);if("normal"===c.type){if(o=r.done?4:2,c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=4,r.method="throw",r.arg=c.arg)}}}(t,r,new S(o||[])),!0),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=u;var f={};function g(){}function v(){}function m(){}var h={};d(h,s,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(I([])));y&&y!==o&&a.call(y,s)&&(h=y);var x=m.prototype=g.prototype=Object.create(h);function w(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,n){function r(o,i,s,l){var c=p(e[o],e,i);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==t(u)&&a.call(u,"__await")?n.resolve(u.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):n.resolve(u).then((function(e){d.value=e,s(d)}),(function(e){return r("throw",e,s,l)}))}l(c.arg)}var o;d(this,"_invoke",(function(e,t){function a(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(a,a):a()}),!0)}function k(t,n){var r=n.method,o=t.i[r];if(o===e)return n.delegate=null,"throw"===r&&t.i.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=p(o,t.i,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;var i=a.arg;return i?i.done?(n[t.r]=i.value,n.next=t.n,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function E(e){this.tryEntries.push(e)}function F(t){var n=t[4]||{};n.type="normal",n.arg=e,t[4]=n}function S(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function I(n){if(null!=n){var r=n[s];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,i=function t(){for(;++o<n.length;)if(a.call(n,o))return t.value=n[o],t.done=!1,t;return t.value=e,t.done=!0,t};return i.next=i}}throw new TypeError(t(n)+" is not iterable")}return v.prototype=m,d(x,"constructor",m),d(m,"constructor",v),v.displayName=d(m,c,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,d(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},r.awrap=function(e){return{__await:e}},w(_.prototype),d(_.prototype,l,(function(){return this})),r.AsyncIterator=_,r.async=function(e,t,n,o,a){void 0===a&&(a=Promise);var i=new _(u(e,t,n,o),a);return r.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(x),d(x,c,"Generator"),d(x,s,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},r.values=I,S.prototype={constructor:S,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e){i.type="throw",i.arg=t,n.next=e}for(var o=n.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],s=this.prev,l=a[1],c=a[2];if(-1===a[0])return r("end"),!1;if(!l&&!c)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<l)return this.method="next",this.arg=e,r(l),!0;if(s<c)return r(c),!1}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var o=r;break}}o&&("break"===e||"continue"===e)&&o[0]<=t&&t<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o[2],f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[2]===e)return this.complete(n[4],n[3]),F(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[0]===e){var r=n[4];if("throw"===r.type){var o=r.arg;F(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={i:I(t),r:n,n:r},"next"===this.method&&(this.arg=e),f}},r}function r(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,l,"next",e)}function l(e){r(i,o,a,s,l,"throw",e)}s(void 0)}))}}function a(e,t,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;return'\n        <div class="relative w-full max-w-64 bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 pb-12" \n             data-food-id="'.concat((arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)||"",'" \n             data-serving-size="').concat(r||1,'" \n             data-serving-unit="').concat(o||"serving",'" \n             data-is-from-search="').concat(a||!1,'" \n             data-recipe-id="').concat(i||"",'" \n             data-protein="').concat(s||0,'" \n             data-carbs="').concat(l||0,'" \n             data-fat="').concat(c||0,'">\n            \n            \x3c!-- Food Image Container --\x3e\n            <div class="relative w-full h-44 overflow-hidden rounded-t-2xl">\n                <img src="').concat(e,'" \n                     alt="').concat(t,'" \n                     class="w-full h-full object-cover">\n                \n                \x3c!-- View Details Button (Info icon) --\x3e\n                <button class="absolute top-2 left-2 w-7 h-7 bg-white bg-opacity-90 backdrop-blur-sm rounded-full flex items-center justify-center text-blue-500 text-sm font-bold hover:bg-white hover:scale-110 active:scale-95 transition-all duration-200 shadow-md z-10 view-details-button">\n                    <span class="details-icon text-xs leading-none">â“˜</span>\n                </button>\n            </div>\n            \n            \x3c!-- Food Info --\x3e\n            <div class="px-4 pt-3 pb-3 pr-16">\n                <h3 class="text-lg font-semibold text-amber-900 mb-1 leading-tight food-name">').concat(t,'</h3>\n                <p class="text-sm text-amber-700 font-normal food-calories">').concat(n||0,' kcal</p>\n            </div>\n            \n            \x3c!-- Add Button --\x3e\n            <button class="absolute bottom-4 right-4 w-10 h-10 bg-amber-900 hover:bg-amber-800 active:bg-amber-950 rounded-full flex items-center justify-center transition-all duration-200 shadow-md hover:shadow-lg add-button">\n                <span class="text-white text-xl font-light leading-none plus-icon">+</span>\n            </button>\n        </div>\n    ')}function i(e,t){var n=document.getElementById(t);n&&(n.innerHTML="",e.forEach((function(e){var t=a(e.image,e.name,e.calories,e.id,e.serving_size,e.serving_unit,e.is_from_search,e.recipe_id,e.protein,e.carbs,e.fat);n.innerHTML+=t})),s(t))}function s(e){var t=document.getElementById(e);t&&(t.querySelectorAll(".add-button").forEach((function(e){e.removeEventListener("click",l),e.addEventListener("click",l)})),t.querySelectorAll(".view-details-button").forEach((function(e){e.removeEventListener("click",c),e.addEventListener("click",c)})))}function l(e){var t,n,r;e.preventDefault(),e.stopPropagation();var o=e.target.closest("[data-food-id]");if(o){var a=(null===(t=o.querySelector(".food-name"))||void 0===t?void 0:t.textContent)||"Unknown Food",i=(null===(n=o.querySelector(".food-calories"))||void 0===n?void 0:n.textContent)||"0 kcal",s=parseInt(i.replace(" kcal",""))||0,l=o.dataset.foodId||null,c=o.dataset.servingSize||1,d=o.dataset.servingUnit||"serving",u=o.dataset.recipeId||null,p=parseFloat(o.dataset.protein)||0,g=parseFloat(o.dataset.carbs)||0,v=parseFloat(o.dataset.fat)||0,m=(null===(r=o.querySelector("img"))||void 0===r?void 0:r.src)||null;console.log("Add button clicked for:",{foodName:a,foodCalories:s,foodId:l,recipeId:u}),f({id:l,recipe_id:u,name:a,calories:s,serving_size:c,serving_unit:d,protein:p,carbs:g,fat:v,image_url:m})}}function c(e){var t,n,r;e.preventDefault(),e.stopPropagation();var o=e.target.closest("[data-food-id]");if(o){var a=(null===(t=o.querySelector(".food-name"))||void 0===t?void 0:t.textContent)||"Unknown Food",i=(null===(n=o.querySelector(".food-calories"))||void 0===n?void 0:n.textContent)||"0 kcal",s=parseInt(i.replace(" kcal",""))||0,l=o.dataset.foodId||null,c=o.dataset.recipeId||null,f="true"===o.dataset.isFromSearch,g=parseFloat(o.dataset.servingSize)||1,v=o.dataset.servingUnit||"serving",m=parseFloat(o.dataset.protein)||0,h=parseFloat(o.dataset.carbs)||0,b=parseFloat(o.dataset.fat)||0;console.log("Details button clicked for:",{foodName:a,foodId:l,recipeId:c,isFromSearch:f,protein:m,carbs:h,fat:b});var y={name:a,calories:s||0,protein:m||0,carbs:h||0,fat:b||0,serving_size:g||1,serving_unit:v||"serving",image_url:(null===(r=o.querySelector("img"))||void 0===r?void 0:r.src)||null};c&&""!==c&&"null"!==c&&"undefined"!==c?function(e){d.apply(this,arguments)}(c,y):l&&""!==l&&"null"!==l&&"undefined"!==l&&!f?function(e){u.apply(this,arguments)}(l):p(y)}}function d(){return d=o(n().mark((function e(t){var r,o,a,i,s,l=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:null,console.log("Trying to fetch recipe details for:",t),console.log("Fallback data:",r),!(r&&r.calories>0)){e.next=7;break}return console.log("Using fallback data directly for search result"),p(r),e.abrupt("return");case 7:if(e.prev=7,o=localStorage.getItem("authToken")){e.next=13;break}return console.warn("No auth token found, showing fallback data"),r?p(r):alert("Authentication required to view details"),e.abrupt("return");case 13:return p({name:"Loading...",loading:!0}),e.next=16,fetch("https://kalkulori.up.railway.app/api/meals/".concat(t,"/details"),{method:"GET",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"}});case 16:if((a=e.sent).ok){e.next=19;break}throw new Error("HTTP error! status: ".concat(a.status));case 19:return e.next=21,a.json();case 21:if("success"!==(i=e.sent).status||!i.data){e.next=27;break}p({name:(s=i.data).food_name||s.Name||"Unknown Recipe",calories:s.calories_per_serving||Math.round(s.Calories)||0,protein:s.protein_per_serving||parseFloat(s.ProteinContent)||0,carbs:s.carbs_per_serving||parseFloat(s.CarbohydrateContent)||0,fat:s.fat_per_serving||parseFloat(s.FatContent)||0,serving_size:s.serving_size||s.ServingSize||1,serving_unit:s.serving_unit||s.ServingUnit||"Porsi",image_url:s.image_url||(s.Image?s.Image.split(",")[0].trim().replace(/^"|"$/g,""):null),description:s.description||s.Description,instructions:s.instructions||s.RecipeInstructions,ingredients:s.ingredients||s.RecipeIngredient}),e.next=28;break;case 27:throw new Error("Invalid response format");case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(7),console.error("Error fetching meal details:",e.t0),p(r||{name:"Error",error:"Failed to load food details. Please try again.",calories:0});case 34:case"end":return e.stop()}}),e,null,[[7,30]])}))),d.apply(this,arguments)}function u(){return(u=o(n().mark((function e(t){var r,o,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://kalkulori.up.railway.app/api/foods/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("HTTP error! status: ".concat(r.status));case 6:return e.next=8,r.json();case 8:if("success"!==(o=e.sent).status||!o.data||!o.data.food){e.next=14;break}p({name:(a=o.data.food).food_name,calories:a.calories_per_serving,protein:a.protein_per_serving,carbs:a.carbs_per_serving,fat:a.fat_per_serving,serving_size:a.serving_size,serving_unit:a.serving_unit,image_url:a.image_url}),e.next=15;break;case 14:throw new Error("Invalid response format");case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Error fetching food details:",e.t0),alert("Failed to load food details. Please try again.");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function p(e){console.log("Showing details popup for:",e);var t=document.getElementById("food-details-popup-overlay");t&&t.remove();var n="https://images.unsplash.com/photo-1546554137-f86b9593a222?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",r=e.image_url||n,o=function(e){return(parseFloat(e)||0).toFixed(1)},a="";a=e.loading?'\n            <div class="flex flex-col items-center justify-center py-12">\n                <div class="w-8 h-8 border-4 border-gray-300 border-t-green-500 rounded-full animate-spin mb-4"></div>\n                <p class="text-gray-600">Loading food details...</p>\n            </div>\n        ':e.error?'\n            <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded">\n                <h4 class="text-red-800 font-semibold mb-2">Error</h4>\n                <p class="text-red-600">'.concat(e.error,"</p>\n            </div>\n        "):'\n            <div class="w-full h-48 rounded-xl overflow-hidden mb-6">\n                <img src="'.concat(r,'" alt="').concat(e.name,'" class="w-full h-full object-cover" onerror="this.src=\'').concat(n,'\'">\n            </div>\n            <div class="space-y-6">\n                <div>\n                    <h4 class="text-lg font-semibold text-gray-800 mb-3">Nutrition Information</h4>\n                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">\n                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">\n                            <span class="font-medium text-gray-600">Calories:</span>\n                            <span class="font-semibold text-blue-600">').concat(e.calories||0,' kcal</span>\n                        </div>\n                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">\n                            <span class="font-medium text-gray-600">Protein:</span>\n                            <span class="font-semibold text-blue-600">').concat(o(e.protein),'g</span>\n                        </div>\n                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">\n                            <span class="font-medium text-gray-600">Carbohydrates:</span>\n                            <span class="font-semibold text-blue-600">').concat(o(e.carbs),'g</span>\n                        </div>\n                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">\n                            <span class="font-medium text-gray-600">Fat:</span>\n                            <span class="font-semibold text-blue-600">').concat(o(e.fat),'g</span>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <h4 class="text-lg font-semibold text-gray-800 mb-3">Serving Information</h4>\n                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">\n                        <span class="font-medium text-gray-600">Serving Size:</span>\n                        <span class="font-semibold text-blue-600">').concat(e.serving_size||1," ").concat(e.serving_unit||"serving","</span>\n                    </div>\n                </div>\n                ").concat(e.description?'\n                    <div>\n                        <h4 class="text-lg font-semibold text-gray-800 mb-3">Description</h4>\n                        <p class="text-gray-600 leading-relaxed p-3 bg-gray-50 rounded-lg">'.concat(e.description,"</p>\n                    </div>\n                "):"","\n                ").concat(e.ingredients?'\n                    <div>\n                        <h4 class="text-lg font-semibold text-gray-800 mb-3">Ingredients</h4>\n                        <p class="text-gray-600 leading-relaxed p-3 bg-gray-50 rounded-lg">'.concat(Array.isArray(e.ingredients)?e.ingredients.join(", "):e.ingredients,"</p>\n                    </div>\n                "):"","\n                ").concat(e.instructions?'\n                    <div>\n                        <h4 class="text-lg font-semibold text-gray-800 mb-3">Instructions</h4>\n                        <p class="text-gray-600 leading-relaxed p-3 bg-gray-50 rounded-lg">'.concat(Array.isArray(e.instructions)?e.instructions.join(" "):e.instructions,"</p>\n                    </div>\n                "):"","\n            </div>\n        ");var i='\n        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm" id="food-details-popup-overlay">\n            <div class="bg-white rounded-2xl max-w-lg w-11/12 max-h-95vh overflow-y-auto shadow-2xl transform transition-all duration-300">\n                <div class="flex justify-between items-center p-6 border-b border-gray-200">\n                    <h3 class="text-xl font-semibold text-gray-800">'.concat(e.name||"Food Details",'</h3>\n                    <button class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors duration-200 text-gray-400 hover:text-gray-600" id="details-popup-close">\n                        <span class="text-2xl leading-none">&times;</span>\n                    </button>\n                </div>\n                <div class="p-6">\n                    ').concat(a,'\n                </div>\n                <div class="flex justify-center p-6 border-t border-gray-200">\n                    <button class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors duration-200" id="btn-details-close">Close</button>\n                </div>\n            </div>\n        </div>\n    ');document.body.insertAdjacentHTML("beforeend",i);var s=document.getElementById("food-details-popup-overlay"),l=document.getElementById("details-popup-close"),c=document.getElementById("btn-details-close");function d(){s&&s.parentNode&&s.parentNode.removeChild(s)}l&&l.addEventListener("click",d),c&&c.addEventListener("click",d),s&&s.addEventListener("click",(function(e){e.target===s&&d()}))}function f(e){console.log("Showing popup for:",e);var t=document.getElementById("meal-popup-overlay");t&&t.remove();var r='\n        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm" id="meal-popup-overlay">\n            <div class="bg-white rounded-2xl max-w-md w-11/12 shadow-2xl transform transition-all duration-300">\n                <div class="flex justify-between items-center p-6 border-b border-gray-200">\n                    <h3 class="text-xl font-semibold text-gray-800">Add '.concat(e.name,'</h3>\n                    <button class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors duration-200 text-gray-400 hover:text-gray-600" id="popup-close">\n                        <span class="text-2xl leading-none">&times;</span>\n                    </button>\n                </div>\n                <div class="p-6 space-y-4">\n                    <div>\n                        <label for="meal-type" class="block text-sm font-medium text-gray-700 mb-2">Meal Type:</label>\n                        <select id="meal-type" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none">\n                            <option value="">Select meal type</option>\n                            <option value="breakfast">Breakfast</option>\n                            <option value="lunch">Lunch</option>\n                            <option value="dinner">Dinner</option>\n                            <option value="snack">Snack</option>\n                        </select>\n                    </div>\n                    <div>\n                        <label for="servings" class="block text-sm font-medium text-gray-700 mb-2">Servings:</label>\n                        <input type="number" id="servings" min="1" step="1" value="1" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none">\n                    </div>\n                    <div>\n                        <label for="log-date" class="block text-sm font-medium text-gray-700 mb-2">Date:</label>\n                        <input type="date" id="log-date" value="').concat((new Date).toISOString().split("T")[0],'" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none">\n                    </div>\n                </div>\n                <div class="flex gap-3 p-6 border-t border-gray-200">\n                    <button class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-medium transition-colors duration-200" id="btn-cancel">Cancel</button>\n                    <button class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-medium transition-colors duration-200" id="btn-add">Add</button>\n                </div>\n            </div>\n        </div>\n    ');document.body.insertAdjacentHTML("beforeend",r);var a=document.getElementById("meal-popup-overlay"),i=document.getElementById("popup-close"),s=document.getElementById("btn-cancel"),l=document.getElementById("btn-add");function c(){a&&a.parentNode&&a.parentNode.removeChild(a)}i&&i.addEventListener("click",c),s&&s.addEventListener("click",c),a&&a.addEventListener("click",(function(e){e.target===a&&c()})),l&&l.addEventListener("click",o(n().mark((function t(){var r,o,a,i,s,d,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null===(r=document.getElementById("meal-type"))||void 0===r?void 0:r.value,s=parseFloat(null===(o=document.getElementById("servings"))||void 0===o?void 0:o.value),d=null===(a=document.getElementById("log-date"))||void 0===a?void 0:a.value,i&&s&&d){t.next=6;break}return alert("Please fill all fields"),t.abrupt("return");case 6:if(t.prev=6,l.disabled=!0,l.textContent="Adding...",!window.mealApiService||!e.id){t.next=24;break}if(!e.recipe_id){t.next=15;break}return t.next=13,window.foodApiService.addFoodFromSearch({recipe_id:e.recipe_id,food_name:e.name,calories_per_serving:e.calories||0,protein_per_serving:e.protein||0,carbs_per_serving:e.carbs||0,fat_per_serving:e.fat||0,serving_size:e.serving_size||1,serving_unit:e.serving_unit||"serving",meal_type:i,servings:s,log_date:d,image_url:e.image_url});case 13:t.next=17;break;case 15:return t.next=17,window.mealApiService.createMealEntry({food_item_id:e.id,meal_type:i,servings:s,log_date:d});case 17:alert("Meal added successfully!"),c(),u=new CustomEvent("mealAdded",{detail:{source:"search",mealData:e}}),document.dispatchEvent(u),"#/"!==window.location.hash&&"#/home"!==window.location.hash||setTimeout((function(){window.location.reload()}),1e3),t.next=27;break;case 24:console.log("Added ".concat(e.name," - ").concat(i," - ").concat(s," servings on ").concat(d)),alert("Demo: Meal would be added to your log!"),c();case 27:t.next=35;break;case 29:t.prev=29,t.t0=t.catch(6),console.error("Error adding meal:",t.t0),alert("Failed to add meal. Please try again."),l.disabled=!1,l.textContent="Add";case 35:case"end":return t.stop()}}),t,null,[[6,29]])}))))}document.addEventListener("DOMContentLoaded",(function(){console.log("DOM loaded, binding food card events"),s("food-container")}));var g=[{id:"sample_1",image:"https://images.unsplash.com/photo-1569058242253-92a9c755a0ec?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",name:"Fried Chicken Wings",calories:320,serving_size:1,serving_unit:"serving"},{id:"sample_2",image:"https://images.unsplash.com/photo-1512058564366-18510be2db19?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",name:"Fried Rice with Egg",calories:270,serving_size:1,serving_unit:"serving"},{id:"sample_3",image:"https://images.unsplash.com/photo-1585032226651-759b368d7246?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",name:"Fried Noodles",calories:280,serving_size:1,serving_unit:"serving"}],v=[{id:"default_1",image:"https://images.unsplash.com/photo-1569058242253-92a9c755a0ec?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",name:"Fried Chicken Wings",calories:320,serving_size:1,serving_unit:"serving"},{id:"default_2",image:"https://images.unsplash.com/photo-1512058564366-18510be2db19?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",name:"Fried Rice with Egg",calories:270,serving_size:1,serving_unit:"serving"},{id:"default_3",image:"https://images.unsplash.com/photo-1585032226651-759b368d7246?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",name:"Chicken Soto",calories:312,serving_size:1,serving_unit:"serving"},{id:"default_4",image:"https://images.unsplash.com/photo-1585032226651-759b368d7246?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",name:"Fried Noodles",calories:280,serving_size:1,serving_unit:"serving"},{id:"default_5",image:"https://images.unsplash.com/photo-1569058242253-92a9c755a0ec?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",name:"Meatballs Soup",calories:283,serving_size:1,serving_unit:"serving"},{id:"default_6",image:"https://images.unsplash.com/photo-1512058564366-18510be2db19?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",name:"Noodles Soup",calories:137,serving_size:1,serving_unit:"serving"},{id:"default_7",image:"https://images.unsplash.com/photo-1585032226651-759b368d7246?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",name:"Taichan Satay",calories:250,serving_size:1,serving_unit:"serving"},{id:"default_8",image:"https://images.unsplash.com/photo-1569058242253-92a9c755a0ec?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",name:"Pukis Cake",calories:350,serving_size:1,serving_unit:"serving"}];e.exports&&(e.exports={createFoodCard:a,renderFoodCards:i,bindFoodCardEvents:s,showAddMealPopup:f,showFoodDetailsPopup:p,sampleFoodData:g,defaultMealsData:v}),"undefined"!=typeof window&&(window.FoodCard={createFoodCard:a,renderFoodCards:i,bindFoodCardEvents:s,showAddMealPopup:f,showFoodDetailsPopup:p,sampleFoodData:g,defaultMealsData:v})}}]);
//# sourceMappingURL=app~4a2de6a5.bundle.js.map