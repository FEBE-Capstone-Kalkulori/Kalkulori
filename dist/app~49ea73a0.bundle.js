/*! For license information please see app~49ea73a0.bundle.js.LICENSE.txt */
(self.webpackChunkkalkulori=self.webpackChunkkalkulori||[]).push([[324],{74:t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,n(a.key),a)}}function n(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,r||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}var a=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentSlide=0,this.totalSlides=3,this.slideInterval=null},e=[{key:"renderAuthHeader",value:function(){return'\n            <header class="relative font-cal-sans tracking-wider bg-primary-bg">\n                <div class="flex justify-center items-center px-8 py-4 h-20">\n                    <div class="flex items-center">\n                        <img src="./public/image/logo-text.png" alt="Kalkulori Logo" class="h-auto w-60">\n                    </div>\n                </div>\n            </header>\n        '}},{key:"renderHomeHeader",value:function(){return'\n            <header class="relative font-cal-sans tracking-wider">\n                \x3c!-- Navigation Bar - Transparan di atas slider --\x3e\n                <div class="absolute top-0 left-0 w-full z-30 flex justify-between items-center px-8 py-2 bg-transparent h-20">\n                    <div class="flex items-center">\n                        <img src="./public/image/logo-text.png" alt="Kalkulori Logo" class="h-auto w-60 mr-1">\n                    </div>\n                    <nav class="flex gap-6">\n                        <a href="#/" class="text-primary-text/70 no-underline text-sm transition-colors duration-300 ease-in-out hover:text-primary-text hover:underline">Home</a>\n                        <a href="#/history" class="text-primary-text/70 no-underline text-sm transition-colors duration-300 ease-in-out hover:text-primary-text hover:underline">History</a>\n                        <a href="#/profile" class="text-primary-text/70 no-underline text-sm transition-colors duration-300 ease-in-out hover:text-primary-text hover:underline">Profile</a>\n                    </nav>\n                </div>\n\n                \x3c!-- Slider Section --\x3e\n                <div class="w-full overflow-hidden relative h-screen max-h-[600px]">\n                    <div id="slider" class="flex transition-transform duration-500 ease-in-out h-full">\n                        \x3c!-- Slide 1 - Welcome --\x3e\n                        <div class="min-w-full h-full bg-cover bg-center flex relative flex-col justify-center items-center text-primary-text text-center p-4 slide-2">\n                            <div class="absolute top-0 left-0 w-full h-full z-10 slide-overlay"></div>\n                            <h2 class="relative z-20 text-4xl font-bold mb-4 max-w-4/5" style="text-shadow: 2px 2px 4px rgba(184, 147, 0, 0.7);">Welcome to Kalkulori!</h2>\n                            <p class="relative z-20 text-2xl font-medium max-w-3/5" style="text-shadow: 1px 1px 2px rgba(255, 174, 0, 0.7);">Ready to live a healthy life?</p>\n                        </div>\n\n                        \x3c!-- Slide 2 - Count Calories --\x3e\n                        <div class="min-w-full h-full bg-cover bg-center flex relative flex-col justify-center items-center text-primary-text text-center p-4 slide-1">\n                            <div class="absolute top-0 left-0 w-full h-full z-10 slide-overlay"></div>\n                            <h2 class="relative z-20 text-4xl font-bold mb-4 max-w-4/5" style="text-shadow: 2px 2px 4px rgba(184, 147, 0, 0.7);">Count your calories easily everyday</h2>\n                            <p class="relative z-20 text-2xl font-medium max-w-3/5" style="text-shadow: 1px 1px 2px rgba(255, 174, 0, 0.7);">Maintain a healthy eating habit with Kalkulori</p>\n                        </div>\n\n                        \x3c!-- Slide 3 - Track Progress --\x3e\n                        <div class="min-w-full h-full bg-cover bg-center flex relative flex-col justify-center items-center text-primary-text text-center p-4 slide-3">\n                            <div class="absolute top-0 left-0 w-full h-full z-10 slide-overlay"></div>\n                            <h2 class="relative z-20 text-4xl font-bold mb-4 max-w-4/5" style="text-shadow: 2px 2px 4px rgba(184, 147, 0, 0.7);">Track your progress</h2>\n                            <p class="relative z-20 text-2xl font-medium max-w-3/5" style="text-shadow: 1px 1px 2px rgba(255, 174, 0, 0.7);">view charts and statistics of your eating habits over a selected period of time</p>\n                        </div>\n                    </div>\n\n                    \x3c!-- Slider Navigation Dots --\x3e\n                    <div class="flex justify-center absolute bottom-5 w-full z-20">\n                        <span class="dot w-3 h-3 bg-primary-text/70 rounded-full mx-1 cursor-pointer transition-all duration-300 hover:bg-primary-text" data-slide="0"></span>\n                        <span class="dot w-3 h-3 bg-primary-text/70 rounded-full mx-1 cursor-pointer transition-all duration-300 hover:bg-primary-text" data-slide="1"></span>\n                        <span class="dot w-3 h-3 bg-primary-text/70 rounded-full mx-1 cursor-pointer transition-all duration-300 hover:bg-primary-text" data-slide="2"></span>\n                    </div>\n                </div>\n            </header>\n        '}},{key:"renderPageHeader",value:function(t){return'\n            <header class="relative font-cal-sans tracking-wider bg-accent-yellow">\n                <div class="flex justify-between items-center px-8 py-2 h-20">\n                    <div class="flex items-center">\n                        <img src="./public/image/logo-text.png" alt="Kalkulori Logo" class="h-auto w-60 mr-1">\n                    </div>\n                    <nav class="flex gap-6">\n                        <a href="#/" class="no-underline text-sm transition-colors duration-300 ease-in-out hover:text-primary-text hover:underline '.concat("home"===t?"text-primary-text font-semibold":"text-primary-text/70",'">Home</a>\n                        <a href="#/history" class="no-underline text-sm transition-colors duration-300 ease-in-out hover:text-primary-text hover:underline ').concat("history"===t?"text-primary-text font-semibold":"text-primary-text/70",'">History</a>\n                        <a href="#/profile" class="no-underline text-sm transition-colors duration-300 ease-in-out hover:text-primary-text hover:underline ').concat("profile"===t?"text-primary-text font-semibold":"text-primary-text/70",'">Profile</a>\n                    </nav>\n                </div>\n            </header>\n        ')}},{key:"render",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(t){case"auth":return this.renderAuthHeader();case"home":default:return this.renderHomeHeader();case"page":return this.renderPageHeader(e)}}},{key:"initSlider",value:function(){var t=this;this.slideInterval=setInterval((function(){t.nextSlide()}),5e3),document.addEventListener("click",(function(e){if(e.target.classList.contains("dot")){var r=parseInt(e.target.dataset.slide);t.goToSlide(r)}}));var e=document.getElementById("slider");e&&(e.addEventListener("mouseenter",(function(){clearInterval(t.slideInterval)})),e.addEventListener("mouseleave",(function(){t.slideInterval=setInterval((function(){t.nextSlide()}),5e3)})))}},{key:"nextSlide",value:function(){this.currentSlide=(this.currentSlide+1)%this.totalSlides,this.updateSlider()}},{key:"goToSlide",value:function(t){this.currentSlide=t,this.updateSlider()}},{key:"updateSlider",value:function(){var t=this,e=document.getElementById("slider"),r=document.querySelectorAll(".dot");e&&(e.style.transform="translateX(-".concat(100*this.currentSlide,"%)")),r.forEach((function(e,r){r===t.currentSlide?(e.classList.add("active"),e.style.backgroundColor="var(--primary-text)"):(e.classList.remove("active"),e.style.backgroundColor="rgba(79, 52, 34, 0.7)")}))}},{key:"destroy",value:function(){this.slideInterval&&clearInterval(this.slideInterval)}},{key:"addSliderStyles",value:function(){var t=document.createElement("style");t.textContent='\n            .slide-1 {\n                background-image: url("../public/image/flat-lay-delicious-food-plate.jpg");\n            }\n            .slide-2 {\n                background-image: url("../public/image/different-goodies-with-copy-space.jpg");\n            }\n            .slide-3 {\n                background-image: url("../public/image/measuring-tape-near-slices-fruit-crisp-bread.jpg");\n            }\n            .slide-overlay {\n                background: rgba(255, 223, 100, 0.5);\n                box-shadow: inset 0 0 200px rgba(255, 200, 0, 0.4);\n            }\n        ',document.head.appendChild(t)}}],e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();t.exports&&(t.exports=a)},237:(t,e,r)=>{"use strict";r.d(e,{A:()=>k});var n=function(t){return""},a=function(t){return t.loading?'\n      <div class="flex flex-col items-center justify-center py-12 px-4">\n        <div class="w-8 h-8 border-4 border-gray-300 border-t-green-500 rounded-full animate-spin mb-4"></div>\n        <p class="text-gray-600 text-center text-base">'.concat(t.isSearchMode?"Searching foods...":"Loading foods...","</p>\n      </div>\n    "):t.error?'\n      <div class="px-4 py-6">\n        <div class="bg-red-50 border-l-4 border-red-500 p-4 mb-4 rounded">\n          <p class="text-red-800 font-medium text-base">'.concat(t.error,"</p>\n        </div>\n        ").concat(t.meals.length>0?o(t.meals):"","\n      </div>\n    "):0===t.meals.length?'\n      <div class="flex flex-col items-center justify-center py-12 px-4 text-center">\n        <p class="text-gray-600 text-lg mb-6 max-w-md">\n          '.concat(t.searchQuery?'No foods found for "'.concat(t.searchQuery,'"'):"No foods available","\n        </p>\n        ").concat(t.isSearchMode?'\n            <button class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200" id="browse-all-button">\n              Browse All Foods\n            </button>\n          ':"","\n      </div>\n    "):o(t.meals)},o=function(t){return'\n    <div class="px-4 py-4" id="food-container">\n      <div class="grid grid-cols-1 md:grid-cols-4 gap-3 sm:gap-4 justify-items-center max-w-6xl mx-auto">\n        '.concat(i(t),"\n      </div>\n    </div>\n  ")},i=function(t){return t.map((function(t){return window.FoodCard.createFoodCard(t.image,t.name,t.calories,t.id,t.serving_size,t.serving_unit,t.is_from_search||!1,t.recipe_id,t.protein,t.carbs,t.fat)})).join("")},s=function(t){return t.loading||0===t.meals.length||t.isSearchMode?"":t.pagination.has_next_page||t.pagination.has_prev_page?'\n    <div class="flex justify-center items-center py-6 px-4 gap-4 sm:gap-6 bg-yellow-50 border-t border-gray-200">\n      <button \n        class="bg-amber-900 hover:bg-amber-800 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-4 py-2 sm:px-6 sm:py-3 rounded-lg text-sm sm:text-base font-semibold transition-colors duration-200 min-w-20" \n        id="prev-button"\n        '.concat(t.pagination.has_prev_page?"":"disabled",'\n      >\n        Previous\n      </button>\n      \n      <span class="text-sm sm:text-base font-semibold text-gray-800 px-2 whitespace-nowrap">\n        Page ').concat(t.currentPage+1,'\n      </span>\n      \n      <button \n        class="bg-amber-900 hover:bg-amber-800 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-4 py-2 sm:px-6 sm:py-3 rounded-lg text-sm sm:text-base font-semibold transition-colors duration-200 min-w-16" \n        id="next-button"\n        ').concat(t.pagination.has_next_page?"":"disabled","\n      >\n        Next\n      </button>\n    </div>\n  "):""};const c=function(t,e,r){t?(t.innerHTML=function(t){return'\n    <div class="fixed inset-0 bg-yellow-50 z-50 overflow-y-auto">\n      \x3c!-- Header --\x3e\n      <div class="px-4 py-4 sm:px-6 sm:py-4 flex items-center border-b-2 border-dotted border-white relative w-full" style="background-color: #9BCF53;">\n        <button class="flex items-center gap-2 text-gray-800 hover:text-gray-600 transition-colors duration-200 p-2 -ml-2" id="back-button">\n          <span class="text-2xl font-bold leading-none">â€¹</span>\n          <span class="text-base font-medium">Back</span>\n        </button>\n        <h1 class="absolute left-1/2 transform -translate-x-1/2 text-xl sm:text-2xl font-semibold text-gray-800 m-0">\n          '.concat(t.isSearchMode?"Search Results":"Search Meal",'\n        </h1>\n      </div>\n      \n      \x3c!-- Search Section --\x3e\n      <div class="bg-yellow-50 px-4 py-5 sm:px-6 sm:py-6 flex justify-center">\n        <div class="w-full max-w-4xl">\n          <div class="flex flex-col sm:flex-row gap-3 sm:gap-4">\n            <input \n              type="text" \n              class="flex-1 px-4 py-3 sm:px-5 sm:py-4 border-2 border-dashed border-gray-600 rounded-lg text-base bg-white outline-none text-gray-600 placeholder-gray-400 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:border-green-500"\n              id="search-input"\n              placeholder="What food that you ate?"\n              value="').concat(t.searchQuery,'"\n              ').concat(t.loading?"disabled":"",'\n            />\n            <button class="bg-amber-900 hover:bg-amber-800 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-6 py-3 sm:px-8 sm:py-4 rounded-lg text-base font-semibold transition-colors duration-200 whitespace-nowrap" \n                    id="search-button" \n                    ').concat(t.loading?"disabled":"",">\n              ").concat(t.loading?"Searching...":"Search","\n            </button>\n            ").concat(t.isSearchMode&&t.searchQuery?'\n              <button class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-3 sm:px-6 sm:py-4 rounded-lg text-base font-semibold transition-colors duration-200 whitespace-nowrap" id="clear-search-button">\n                Clear Search\n              </button>\n            ':"","\n          </div>\n          ").concat(t.isSearchMode?n(t):"","\n        </div>\n      </div>\n      \n      \x3c!-- Content Section --\x3e\n      ").concat(a(t),"\n      \n      \x3c!-- Pagination Section --\x3e\n      ").concat(s(t),"\n    </div>\n  ")}(e),function(t){var e=document.getElementById("back-button"),r=document.getElementById("search-button"),n=document.getElementById("search-input"),a=document.getElementById("clear-search-button"),o=document.getElementById("browse-all-button"),i=document.getElementById("food-container"),s=document.getElementById("prev-button"),c=document.getElementById("next-button");e&&t.onBackClicked&&e.addEventListener("click",t.onBackClicked),r&&t.onSearchClicked&&r.addEventListener("click",(function(){var e=n.value.trim();e&&t.onSearchClicked(e)})),n&&t.onSearchClicked&&(n.addEventListener("keypress",(function(e){if("Enter"===e.key){var r=n.value.trim();r&&t.onSearchClicked(r)}})),n.focus()),a&&t.onClearSearchClicked&&a.addEventListener("click",t.onClearSearchClicked),o&&t.onClearSearchClicked&&o.addEventListener("click",t.onClearSearchClicked),s&&t.onPreviousClicked&&s.addEventListener("click",t.onPreviousClicked),c&&t.onNextClicked&&c.addEventListener("click",t.onNextClicked),i&&window.FoodCard.bindFoodCardEvents("food-container")}(r)):console.error("Container not found for add meal view")};var l=r(647),u=r(569),d=r(774);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function f(){f=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(e,r,n,a){var o=r&&r.prototype instanceof p?r:p,i=Object.create(o.prototype);return c(i,"_invoke",function(e,r,n){var a=1;return function(o,i){if(3===a)throw Error("Generator is already running");if(4===a){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=k(s,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===a)throw a=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=3;var l=u(e,r,n);if("normal"===l.type){if(a=n.done?4:2,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=4,n.method="throw",n.arg=l.arg)}}}(e,n,new E(a||[])),!0),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d={};function p(){}function g(){}function v(){}var m={};c(m,o,(function(){return this}));var y=Object.getPrototypeOf,x=y&&y(y(C([])));x&&x!==r&&n.call(x,o)&&(m=x);var b=v.prototype=p.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,i,s){var c=u(t[a],t,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==h(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}var a;c(this,"_invoke",(function(t,n){function o(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(o,o):o()}),!0)}function k(e,r){var n=r.method,a=e.i[n];if(a===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(a,e.i,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[e.r]=i.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(t){this.tryEntries.push(t)}function P(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function E(t){this.tryEntries=[[-1]],t.forEach(S,this),this.reset(!0)}function C(e){if(null!=e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(h(e)+" is not iterable")}return g.prototype=v,c(b,"constructor",v),c(v,"constructor",g),g.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},w(_.prototype),c(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new _(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},w(b),c(b,s,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){i.type="throw",i.arg=e,r.next=t}for(var a=r.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o[4],s=this.prev,c=o[1],l=o[2];if(-1===o[0])return n("end"),!1;if(!c&&!l)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=s){if(s<c)return this.method="next",this.arg=t,n(c),!0;if(s<l)return n(l),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var a=n;break}}a&&("break"===t||"continue"===t)&&a[0]<=e&&e<=a[2]&&(a=null);var o=a?a[4]:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a[2],d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),P(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var a=n.arg;P(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:C(e),r,n},"next"===this.method&&(this.arg=t),d}},e}function p(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){p(o,n,a,i,s,"next",t)}function s(t){p(o,n,a,i,s,"throw",t)}i(void 0)}))}}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function m(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(e)?e:e+""}const y=function(){return t=function t(e){var r=e.container;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=r,this.data={searchQuery:"",meals:[],loading:!1,error:null,currentPage:0,maxPages:5,pagination:{has_next_page:!1,has_prev_page:!1,next_cursor:null,prev_cursor:null,current_cursor:null},itemsPerPage:12,cursors:[],isSearchMode:!1,searchResults:[]},this.eventHandlers={onSearchClicked:this._handleSearch.bind(this),onBackClicked:this._handleBack.bind(this),onPreviousClicked:this._handlePrevious.bind(this),onNextClicked:this._handleNext.bind(this),onClearSearchClicked:this._handleClearSearch.bind(this)}},e=[{key:"init",value:(p=g(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,window.mealApiService=d.A,window.foodApiService=u.A,this.data.loading=!0,this.data.currentPage=0,this.data.cursors=[null],this.data.isSearchMode=!1,this._renderView(),t.next=10,this._loadFoods();case 10:t.next=20;break;case 12:t.prev=12,t.t0=t.catch(0),console.error("Failed to initialize Add Meal page:",t.t0),this.data.error="Failed to load foods. Using default data.",this.data.meals=l.defaultMealsData.slice(0,this.data.itemsPerPage),this.data.currentPage=0,this.data.cursors=[null],this._renderView();case 20:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return p.apply(this,arguments)})},{key:"_loadFoods",value:(h=g(f().mark((function t(){var e,r,n,a,o,i,s,c=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=c.length>0&&void 0!==c[0]?c[0]:"",r=c.length>1&&void 0!==c[1]?c[1]:null,t.prev=3,this.data.loading=!0,this.data.error=null,this._renderView(),!e.trim()){t.next=47;break}return this.data.isSearchMode=!0,console.log("Searching using ML service for: ".concat(e)),t.prev=10,t.next=13,u.A.searchFoods(e,60);case 13:n=t.sent,a=n.foods.map((function(t){return{id:t.recipe_id||t.id,recipe_id:t.recipe_id,name:t.food_name,calories:t.calories_per_serving||0,protein:t.protein_per_serving||0,carbs:t.carbs_per_serving||0,fat:t.fat_per_serving||0,image:t.image_url||"https://images.unsplash.com/photo-1546554137-f86b9593a222?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",serving_size:t.serving_size||1,serving_unit:t.serving_unit||"serving",is_from_search:!0}})),this.data.meals=a,this.data.searchResults=n.foods||[],this.data.currentPage=0,this.data.cursors=[null],this.data.pagination=n.pagination||{has_next_page:!1,has_prev_page:!1,next_cursor:null,prev_cursor:null,current_cursor:null},0===this.data.meals.length&&(this.data.error='No foods found for "'.concat(e,'". Try different keywords.')),t.next=45;break;case 23:return t.prev=23,t.t0=t.catch(10),console.error("ML search failed, falling back to regular search:",t.t0),this.data.error="Search service error: ".concat(t.t0.message,". Trying alternative search..."),this._renderView(),t.prev=28,t.next=31,u.A.searchFoodsLegacy(e,60);case 31:n=t.sent,this.data.meals=u.A.formatFoodsForCards(n.foods||[]),this.data.currentPage=0,this.data.cursors=[null],this.data.pagination=n.pagination||{has_next_page:!1,has_prev_page:!1,next_cursor:null,prev_cursor:null,current_cursor:null},this.data.error=null,t.next=45;break;case 39:t.prev=39,t.t1=t.catch(28),console.error("Fallback search also failed:",t.t1),this.data.error="Search failed. Please try again or browse available foods.",o=l.defaultMealsData.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())})),this.data.meals=o.slice(0,this.data.itemsPerPage);case 45:t.next=60;break;case 47:if(this.data.isSearchMode=!1,!(null!==r&&r<this.data.currentPage)){t.next=52;break}return t.next=51,this._navigateToPageFromStart(r);case 51:return t.abrupt("return");case 52:return i=null,null!==r&&(i=this.data.cursors[r]||null,this.data.currentPage=r),t.next=56,u.A.getAllFoods({limit:this.data.itemsPerPage,cursor:i,direction:"next"});case 56:n=t.sent,this.data.meals=u.A.formatFoodsForCards(n.foods),n.pagination.next_cursor&&this.data.currentPage<this.data.maxPages-1&&(this.data.cursors[this.data.currentPage+1]=n.pagination.next_cursor),this.data.pagination={has_next_page:(n.pagination.has_next_page||0===this.data.currentPage)&&this.data.currentPage<this.data.maxPages-1,has_prev_page:this.data.currentPage>0,next_cursor:n.pagination.next_cursor,prev_cursor:n.pagination.prev_cursor,current_cursor:n.pagination.current_cursor};case 60:0!==this.data.meals.length||e.trim()||0!==this.data.currentPage||(this.data.meals=l.defaultMealsData.slice(0,this.data.itemsPerPage),this.data.currentPage=0,this.data.cursors=[null],this.data.pagination={has_next_page:!0,has_prev_page:!1,next_cursor:null,prev_cursor:null,current_cursor:null}),t.next=71;break;case 63:t.prev=63,t.t2=t.catch(3),console.error("Error loading foods:",t.t2),this.data.error="Failed to load foods from server.",e.trim()?(s=l.defaultMealsData.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())})),this.data.meals=s.slice(0,this.data.itemsPerPage)):this.data.meals=l.defaultMealsData.slice(0,this.data.itemsPerPage),this.data.currentPage=0,this.data.cursors=[null],this.data.pagination={has_next_page:!e.trim(),has_prev_page:!1,next_cursor:null,prev_cursor:null,current_cursor:null};case 71:return t.prev=71,this.data.loading=!1,this._renderView(),t.finish(71);case 75:case"end":return t.stop()}}),t,this,[[3,63,71,75],[10,23],[28,39]])}))),function(){return h.apply(this,arguments)})},{key:"_navigateToPageFromStart",value:(s=g(f().mark((function t(e){var r,n,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.data.currentPage=0,this.data.cursors=[null],r=null,n=0;case 4:if(!(n<=e)){t.next=13;break}return t.next=7,u.A.getAllFoods({limit:this.data.itemsPerPage,cursor:r,direction:"next"});case 7:a=t.sent,n===e&&(this.data.meals=u.A.formatFoodsForCards(a.foods),this.data.currentPage=e,this.data.pagination={has_next_page:a.pagination.has_next_page&&e<this.data.maxPages-1,has_prev_page:e>0,next_cursor:a.pagination.next_cursor,prev_cursor:a.pagination.prev_cursor,current_cursor:a.pagination.current_cursor}),a.pagination.next_cursor&&n<this.data.maxPages-1&&(this.data.cursors[n+1]=a.pagination.next_cursor,r=a.pagination.next_cursor);case 10:n++,t.next=4;break;case 13:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"_renderView",value:function(){c(this.container,this.data,this.eventHandlers)}},{key:"_handleSearch",value:(i=g(f().mark((function t(e){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.data.searchQuery=e,this.data.currentPage=0,this.data.cursors=[null],this.data.pagination={has_next_page:!1,has_prev_page:!1,next_cursor:null,prev_cursor:null,current_cursor:null},console.log("Searching for: ".concat(e)),t.next=7,this._loadFoods(e);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"_handleClearSearch",value:(o=g(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.data.searchQuery="",this.data.isSearchMode=!1,this.data.searchResults=[],this.data.currentPage=0,this.data.cursors=[null],console.log("Clearing search, returning to browse mode"),t.next=8,this._loadFoods();case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_handlePrevious",value:(a=g(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.data.isSearchMode){t.next=2;break}return t.abrupt("return");case 2:if(!(this.data.currentPage>0)){t.next=5;break}return t.next=5,this._loadFoods(this.data.searchQuery,this.data.currentPage-1,"prev");case 5:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_handleNext",value:(n=g(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.data.isSearchMode){t.next=2;break}return t.abrupt("return");case 2:if(!(this.data.currentPage<this.data.maxPages-1&&this.data.pagination.has_next_page)){t.next=5;break}return t.next=5,this._loadFoods(this.data.searchQuery,this.data.currentPage+1,"next");case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_handleBack",value:function(){window.location.hash="#/"}}],e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,a,o,i,s,h,p}();function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function b(){b=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(e,r,n,a){var o=r&&r.prototype instanceof h?r:h,i=Object.create(o.prototype);return c(i,"_invoke",function(e,r,n){var a=1;return function(o,i){if(3===a)throw Error("Generator is already running");if(4===a){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=k(s,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===a)throw a=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=3;var l=u(e,r,n);if("normal"===l.type){if(a=n.done?4:2,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=4,n.method="throw",n.arg=l.arg)}}}(e,n,new E(a||[])),!0),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d={};function h(){}function f(){}function p(){}var g={};c(g,o,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(C([])));m&&m!==r&&n.call(m,o)&&(g=m);var y=p.prototype=h.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(a,o,i,s){var c=u(t[a],t,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==x(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):e.resolve(d).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}var a;c(this,"_invoke",(function(t,n){function o(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(o,o):o()}),!0)}function k(e,r){var n=r.method,a=e.i[n];if(a===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(a,e.i,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[e.r]=i.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(t){this.tryEntries.push(t)}function P(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function E(t){this.tryEntries=[[-1]],t.forEach(S,this),this.reset(!0)}function C(e){if(null!=e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(x(e)+" is not iterable")}return f.prototype=p,c(y,"constructor",p),c(p,"constructor",f),f.displayName=c(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},e.awrap=function(t){return{__await:t}},w(_.prototype),c(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new _(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},w(y),c(y,s,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){i.type="throw",i.arg=e,r.next=t}for(var a=r.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o[4],s=this.prev,c=o[1],l=o[2];if(-1===o[0])return n("end"),!1;if(!c&&!l)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=s){if(s<c)return this.method="next",this.arg=t,n(c),!0;if(s<l)return n(l),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var a=n;break}}a&&("break"===t||"continue"===t)&&a[0]<=e&&e<=a[2]&&(a=null);var o=a?a[4]:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a[2],d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),P(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var a=n.arg;P(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:C(e),r,n},"next"===this.method&&(this.arg=t),d}},e}function w(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){w(o,n,a,i,s,"next",t)}function s(t){w(o,n,a,i,s,"throw",t)}i(void 0)}))}}const k={render:function(){return _(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'<div id="add-meal-container"></div>');case 1:case"end":return t.stop()}}),t)})))()},afterRender:function(){return _(b().mark((function t(){var e,r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"undefined"!=typeof window&&(window.foodApiService=u.A,window.mealApiService=d.A),e=document.getElementById("add-meal-container"),r=new y({container:e}),t.next=5,r.init();case 5:case"end":return t.stop()}}),t)})))()}}}}]);
//# sourceMappingURL=app~49ea73a0.bundle.js.map