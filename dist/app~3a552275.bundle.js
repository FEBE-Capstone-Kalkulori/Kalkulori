/*! For license information please see app~3a552275.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkkalkulori=self.webpackChunkkalkulori||[]).push([[556],{176:(e,n,t)=>{t.d(n,{Gj:()=>s,aI:()=>u,dk:()=>h,g7:()=>p,jy:()=>d});var a=t(774);function r(){r=function(){return n};var e,n={},t=Object.prototype,a=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function d(e,n,t,a){return Object.defineProperty(e,n,{value:t,enumerable:!a,configurable:!a,writable:!a})}try{d({},"")}catch(e){d=function(e,n,t){return e[n]=t}}function u(n,t,a,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype);return d(o,"_invoke",function(n,t,a){var r=1;return function(i,o){if(3===r)throw Error("Generator is already running");if(4===r){if("throw"===i)throw o;return{value:e,done:!0}}for(a.method=i,a.arg=o;;){var l=a.delegate;if(l){var s=x(l,a);if(s){if(s===m)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(1===r)throw r=4,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=3;var c=p(n,t,a);if("normal"===c.type){if(r=a.done?4:2,c.arg===m)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(r=4,a.method="throw",a.arg=c.arg)}}}(n,a,new F(r||[])),!0),o}function p(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}n.wrap=u;var m={};function v(){}function g(){}function f(){}var h={};d(h,o,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(C([])));b&&b!==t&&a.call(b,o)&&(h=b);var _=f.prototype=v.prototype=Object.create(h);function w(e){["next","throw","return"].forEach((function(n){d(e,n,(function(e){return this._invoke(n,e)}))}))}function k(e,n){function t(r,i,o,s){var c=p(e[r],e,i);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==l(u)&&a.call(u,"__await")?n.resolve(u.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):n.resolve(u).then((function(e){d.value=e,o(d)}),(function(e){return t("throw",e,o,s)}))}s(c.arg)}var r;d(this,"_invoke",(function(e,a){function i(){return new n((function(n,r){t(e,a,n,r)}))}return r=r?r.then(i,i):i()}),!0)}function x(n,t){var a=t.method,r=n.i[a];if(r===e)return t.delegate=null,"throw"===a&&n.i.return&&(t.method="return",t.arg=e,x(n,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var i=p(r,n.i,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[n.r]=o.value,t.next=n.n,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function E(e){this.tryEntries.push(e)}function A(n){var t=n[4]||{};t.type="normal",t.arg=e,n[4]=t}function F(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function C(n){if(null!=n){var t=n[o];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,i=function t(){for(;++r<n.length;)if(a.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=e,t.done=!0,t};return i.next=i}}throw new TypeError(l(n)+" is not iterable")}return g.prototype=f,d(_,"constructor",f),d(f,"constructor",g),g.displayName=d(f,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===g||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,d(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},n.awrap=function(e){return{__await:e}},w(k.prototype),d(k.prototype,s,(function(){return this})),n.AsyncIterator=k,n.async=function(e,t,a,r,i){void 0===i&&(i=Promise);var o=new k(u(e,t,a,r),i);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(_),d(_,c,"Generator"),d(_,o,(function(){return this})),d(_,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var n=Object(e),t=[];for(var a in n)t.unshift(a);return function e(){for(;t.length;)if((a=t.pop())in n)return e.value=a,e.done=!1,e;return e.done=!0,e}},n.values=C,F.prototype={constructor:F,reset:function(n){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!n)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function a(e){o.type="throw",o.arg=n,t.next=e}for(var r=t.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i[4],l=this.prev,s=i[1],c=i[2];if(-1===i[0])return a("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=l){if(l<s)return this.method="next",this.arg=e,a(s),!0;if(l<c)return a(c),!1}}},abrupt:function(e,n){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a[0]>-1&&a[0]<=this.prev&&this.prev<a[2]){var r=a;break}}r&&("break"===e||"continue"===e)&&r[0]<=n&&n<=r[2]&&(r=null);var i=r?r[4]:{};return i.type=e,i.arg=n,r?(this.method="next",this.next=r[2],m):this.complete(i)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),m},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t[2]===e)return this.complete(t[4],t[3]),A(t),m}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t[0]===e){var a=t[4];if("throw"===a.type){var r=a.arg;A(t)}return r}}throw Error("illegal catch attempt")},delegateYield:function(n,t,a){return this.delegate={i:C(n),r:t,n:a},"next"===this.method&&(this.arg=e),m}},n}function i(e,n,t,a,r,i,o){try{var l=e[i](o),s=l.value}catch(e){return void t(e)}l.done?n(s):Promise.resolve(s).then(a,r)}function o(e){return function(){var n=this,t=arguments;return new Promise((function(a,r){var o=e.apply(n,t);function l(e){i(o,a,r,l,s,"next",e)}function s(e){i(o,a,r,l,s,"throw",e)}l(void 0)}))}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var s=function(e){console.log("üîÑ formatMealPlanData input:",JSON.stringify(e,null,2)),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FormatInput";console.log("üîç ".concat(n," Analysis:")),console.log("=================================="),e?(console.log("üìã Input type:",l(e)),console.log("üìã Input keys:",Object.keys(e)),e.meal_plans&&(console.log("üìã Has meal_plans property"),console.log("üìã meal_plans type:",l(e.meal_plans)),console.log("üìã meal_plans is array:",Array.isArray(e.meal_plans)),Array.isArray(e.meal_plans)&&(console.log("üìã meal_plans length:",e.meal_plans.length),e.meal_plans.length>0&&(console.log("üìã First plan keys:",Object.keys(e.meal_plans[0])),console.log("üìã First plan sample:",JSON.stringify(e.meal_plans[0],null,4))))),console.log("üìã Checking for meal types:"),["breakfast","lunch","dinner","Breakfast","Lunch","Dinner","BREAKFAST","LUNCH","DINNER"].forEach((function(n){e[n]&&(console.log("  ‚úÖ Found ".concat(n,":"),Object.keys(e[n])),console.log("  üìÑ ".concat(n," data:"),JSON.stringify(e[n],null,4)))})),console.log("==================================")):console.log("‚ùå Input is null/undefined")}(e,"formatMealPlanData Input");var n=null;if(e&&e.meal_plans&&Array.isArray(e.meal_plans)&&e.meal_plans.length>0)n=e.meal_plans[0],console.log("üì¶ Using meal plan from API response (Case 1):",n);else{if(!e||!(e.breakfast||e.lunch||e.dinner||e.Breakfast||e.Lunch||e.Dinner))return console.log("‚ùå No valid meal plans found in input"),[];n=e,console.log("üì¶ Using direct meal plan object (Case 2):",n)}var t=Object.keys(n);console.log("üîç Available meal keys in plan data:",t);var a=[];return[{key:"breakfast",display:"Breakfast"},{key:"lunch",display:"Lunch"},{key:"dinner",display:"Dinner"}].forEach((function(e){var t=e.key,r=e.display;console.log("üîç Looking for ".concat(t," variations..."));for(var i=null,o=null,l=0,s=[t,t.charAt(0).toUpperCase()+t.slice(1),t.toUpperCase()];l<s.length;l++){var d=s[l];if(n[d]){i=n[d],o=d,console.log("‚úÖ Found ".concat(t,' as "').concat(o,'":'),i);break}}if(i){var u={type:r,name:i.Name||i.food_name||i.name||"Unknown ".concat(r),image:c(i.Image)||i.image_url||"./public/image/meals/".concat(t,"-default.jpg"),calories:Math.round(i.Calories||i.calories_per_serving||i.calories||0),id:i.RecipeId||i.id||i.recipe_id||"".concat(t,"_").concat(Date.now()),serving_size:i.serving_size||i.ServingSize||1,serving_unit:i.serving_unit||i.ServingUnit||"serving",recipe_id:i.RecipeId||i.recipe_id||i.id||null,protein:i.protein||i.ProteinContent||0,carbs:i.carbs||i.CarbohydrateContent||0,fat:i.fat||i.FatContent||0};console.log("‚úÖ Formatted ".concat(t,":"),u),a.push(u)}else{console.log("‚ùå Missing ".concat(t," in plan data"));var p={type:r,name:"Default ".concat(r),image:"./public/image/meals/".concat(t,"-default.jpg"),calories:300,id:"default_".concat(t,"_").concat(Date.now()),serving_size:1,serving_unit:"serving",recipe_id:null,protein:15,carbs:40,fat:10};console.log("üîß Using default ".concat(t,":"),p),a.push(p)}})),console.log("üîÑ formatMealPlanData output:",a),console.log("üîÑ Total formatted meals:",a.length),a},c=function(e){if(!e||"string"!=typeof e)return null;var n=e.replace(/\\\//g,"/").split(/,\s*(?=https?:\/\/)/)[0];return n&&n.trim()?n.trim().replace(/^"|"$/g,""):null},d=function(e){var n=e.reduce((function(e,n){return e+(n.calories||0)}),0);return console.log("üßÆ Total calories calculated:",n),n},u=function(){return[{type:"Breakfast",name:"Fried Chicken Wings",image:"./public/image/meals/fried-chicken-wings.jpg",calories:400,id:"default_breakfast",serving_size:1,serving_unit:"serving"},{type:"Lunch",name:"Fried Rice with Egg",image:"./public/image/meals/fried-rice-egg.jpg",calories:450,id:"default_lunch",serving_size:1,serving_unit:"serving"},{type:"Dinner",name:"Soto Ayam",image:"./public/image/meals/soto-ayam.jpg",calories:350,id:"default_dinner",serving_size:1,serving_unit:"serving"}]},p=function(e){var n,t;if(console.log("üé® createMealPlanSection called with data:",{loading:e.loading,error:e.error,plansExists:!!e.plans,plansLength:(null===(n=e.plans)||void 0===n?void 0:n.length)||0,totalCalories:e.totalCalories,targetCalories:e.targetCalories,dataKeys:e?Object.keys(e):[]}),!e)return console.log("üé® No data provided, rendering error state"),'\n      <div class="error-container">\n        <div class="error-icon">‚ö†Ô∏è</div>\n        <p class="error-message">No meal plan data available</p>\n        <button class="retry-btn" id="generate-meal-plan-btn">Generate Plan</button>\n      </div>\n    ';if(e.loading)return console.log("üé® Rendering loading state"),'\n      <div class="loading-container">\n        <div class="loading-spinner"></div>\n        <p>Generating personalized meal plan...</p>\n      </div>\n    ';if(e.error){console.log("üé® Rendering error state:",e.error);var a=e.error.includes("profile")||e.error.includes("calorie target")||e.error.includes("Profil")||e.error.includes("complete your profile")||e.error.includes("Profile setup required"),r=a?"Complete Profile":"Try Again",i=a?"complete-profile-btn":"generate-meal-plan-btn";return'\n      <div class="error-container">\n        <div class="error-icon">‚ö†Ô∏è</div>\n        <p class="error-message">'.concat(e.error,'</p>\n        <button class="retry-btn" id="').concat(i,'">').concat(r,"</button>\n      </div>\n    ")}if(!e.plans||!Array.isArray(e.plans)||0===e.plans.length)return console.log("üé® Rendering no plans state - plans validation:",{plansExists:!!e.plans,plansIsArray:Array.isArray(e.plans),plansLength:(null===(t=e.plans)||void 0===t?void 0:t.length)||0,plansContent:e.plans}),'\n      <div class="error-container">\n        <div class="error-icon">üçΩÔ∏è</div>\n        <p class="error-message">No meal plans available</p>\n        <button class="retry-btn" id="generate-meal-plan-btn">Generate Plan</button>\n      </div>\n    ';var o=e.totalCalories||d(e.plans)||0,l=e.targetCalories||1500;return console.log("üé® Rendering meal plan content with",e.plans.length,"plans"),console.log("üé® Calorie info:",{totalCalories:o,targetCalories:l}),'\n    <div class="meal-plan-content">\n      <div class="meal-plan-header">\n        <div class="meal-plan-calories">\n          <span class="current-calories">'.concat(o,'</span>\n          <span class="calories-separator">kcal/</span>\n          <span class="target-calories">').concat(l,'</span>\n        </div>\n        <div class="meal-plan-buttons">\n          <button class="generate-plan-btn add-plan-btn" id="add-full-meal-plan-btn">\n            <span class="btn-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"/></svg></span>\n            Add Plan\n          </button>\n          <button class="generate-plan-btn" id="generate-meal-plan-btn">\n            <span class="btn-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M204-318q-22-38-33-78t-11-82q0-134 93-228t227-94h7l-64-64 56-56 160 160-160 160-56-56 64-64h-7q-100 0-170 70.5T240-478q0 26 6 51t18 49l-60 60ZM481-40 321-200l160-160 56 56-64 64h7q100 0 170-70.5T720-482q0-26-6-51t-18-49l60-60q22 38 33 78t11 82q0 134-93 228t-227 94h-7l64 64-56 56Z"/></svg></span>\n            New Plan\n          </button>\n        </div>\n      </div>\n      \n      <div class="meal-plan-grid">\n        ').concat(e.plans.map((function(e){return m(e)})).join(""),"\n      </div>\n      \n      ").concat(e.plans.length<3?'\n        <div class="meal-plan-notice">\n          <p>‚ö†Ô∏è Some meals may be using default options. Try generating a new plan.</p>\n        </div>\n      ':"","\n    </div>\n  ")},m=function(e){if(!e)return console.warn("‚ö†Ô∏è No meal data provided to createMealPlanCard"),"";var n=e.type||"Meal",t=e.name||"Unknown Meal",a=e.calories||0,r=e.image||"./public/image/meals/default-meal.jpg",i=e.id||e.recipe_id||"meal_".concat(Date.now());return console.log("üÉè Creating meal card for:",{mealType:n,mealName:t,mealCalories:a,mealId:i}),'\n    <div class="meal-plan-card" data-meal-type="'.concat(n.toLowerCase(),'" data-meal-id="').concat(i,'">\n      <div class="meal-plan-image" data-meal-details-trigger>\n        <img src="').concat(r,'" alt="').concat(t,'" onerror="this.src=\'./public/image/meals/default-meal.jpg\'; this.onerror=null;">\n        <div class="image-overlay">\n          <span class="view-details-text"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z"/></svg> View Details</span>\n        </div>\n      </div>\n      <div class="meal-plan-info">\n        <div class="meal-type">').concat(n,'</div>\n        <div class="meal-name" title="').concat(t,'">').concat(t,'</div>\n        <div class="meal-calories">').concat(a," kcal</div>\n        ").concat(e.protein||e.carbs||e.fat?'\n          <div class="meal-nutrition-mini">\n            '.concat(e.protein?"P: ".concat(Math.round(e.protein),"g "):"","\n            ").concat(e.carbs?"C: ".concat(Math.round(e.carbs),"g "):"","\n            ").concat(e.fat?"F: ".concat(Math.round(e.fat),"g"):"","\n          </div>\n        "):"",'\n      </div>\n      <button class="meal-plan-add-btn" data-meal=\'').concat(JSON.stringify({id:i,name:t,calories:a,serving_size:e.serving_size||1,serving_unit:e.serving_unit||"serving",type:n,image:r,recipe_id:e.recipe_id||e.id}),'\' title="Add to diary">\n        <span class="plus-icon">+</span>\n      </button>\n    </div>\n  ')},v=function(){var e=new Date,n=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(n,"-").concat(t,"-").concat(a)},g=function(){var e=o(r().mark((function e(n){var t,i,o,l,s,c,d,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=v(),i={meal_plan:{},log_date:t},n.forEach((function(e){var n=e.type.toLowerCase();["breakfast","lunch","dinner"].includes(n)&&(i.meal_plan[n]={RecipeId:e.recipe_id||e.id,Name:e.name,Calories:e.calories,Image:e.image})})),0!==Object.keys(i.meal_plan).length){e.next=6;break}throw new Error("No valid meals to add");case 6:return console.log("üçΩÔ∏è Adding full meal plan:",i),e.prev=7,e.next=10,a.A.addFullMealPlan(i);case 10:alert("Full meal plan added successfully!"),e.next=62;break;case 13:if(e.prev=13,e.t0=e.catch(7),console.warn("üîÑ Full meal plan endpoint failed, trying individual meals:",e.t0.message),!(e.t0.message.includes("Endpoint not found")||e.t0.message.includes("404")||e.t0.message.includes("Network error"))){e.next=61;break}console.log("üîÑ Falling back to individual meal additions..."),o=0,l=0,s=0;case 21:if(!(s<n.length)){e.next=54;break}if(!(d=n[s]).recipe_id||null!==(c=d.id)&&void 0!==c&&c.toString().startsWith("default_")){e.next=37;break}return e.prev=24,e.next=27,a.A.addMealFromPlan({recipe_id:d.recipe_id,meal_type:d.type.toLowerCase(),servings:1,log_date:t});case 27:o++,console.log("‚úÖ Added ".concat(d.name," successfully")),e.next=35;break;case 31:e.prev=31,e.t1=e.catch(24),l++,console.error("‚ùå Failed to add ".concat(d.name,":"),e.t1);case 35:e.next=48;break;case 37:return e.prev=37,e.next=40,a.A.createMealEntry({food_item_id:d.id,meal_type:d.type.toLowerCase(),servings:1,log_date:t});case 40:o++,console.log("‚úÖ Added ".concat(d.name," (default) successfully")),e.next=48;break;case 44:e.prev=44,e.t2=e.catch(37),l++,console.error("‚ùå Failed to add ".concat(d.name," (default):"),e.t2);case 48:if(!(s<n.length-1)){e.next=51;break}return e.next=51,new Promise((function(e){return setTimeout(e,300)}));case 51:s++,e.next=21;break;case 54:if(!(o>0)){e.next=58;break}alert("Meal plan added successfully! ".concat(o," meals added").concat(l>0?", ".concat(l," failed"):"",".")),e.next=59;break;case 58:throw new Error("Failed to add any meals from the plan");case 59:e.next=62;break;case 61:throw e.t0;case 62:u=new CustomEvent("mealPlanMealAdded"),document.dispatchEvent(u),e.next=70;break;case 66:e.prev=66,e.t3=e.catch(0),console.error("Error adding full meal plan:",e.t3),alert("Failed to add meal plan: ".concat(e.t3.message));case 70:case"end":return e.stop()}}),e,null,[[0,66],[7,13],[24,31],[37,44]])})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=o(r().mark((function e(n){var t,i,o,l,s,c,d,u,p,m,v,g,f,h,y,b;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=document.getElementById("meal-details-popup-overlay"))&&o.remove(),l="",l=!n.recipe_id||null!==(t=n.id)&&void 0!==t&&t.toString().startsWith("default_")?'\n      <div class="meal-details-content">\n        <div class="meal-details-header">\n          <img src="'.concat(n.image||"https://images.unsplash.com/photo-1546554137-f86b9593a222",'" alt="').concat(n.name,'">\n          <div class="meal-basic-info">\n            <h3>').concat(n.name,'</h3>\n            <p class="meal-calories">').concat(n.calories,' kcal per serving</p>\n          </div>\n        </div>\n        \n        <div class="meal-nutrition">\n          <h4>Nutrition per serving:</h4>\n          <div class="nutrition-grid">\n            <div class="nutrition-item">\n              <span class="nutrition-label">Protein</span>\n              <span class="nutrition-value">').concat(Math.round(n.protein||0),'g</span>\n            </div>\n            <div class="nutrition-item">\n              <span class="nutrition-label">Carbs</span>\n              <span class="nutrition-value">').concat(Math.round(n.carbs||0),'g</span>\n            </div>\n            <div class="nutrition-item">\n              <span class="nutrition-label">Fat</span>\n              <span class="nutrition-value">').concat(Math.round(n.fat||0),'g</span>\n            </div>\n          </div>\n        </div>\n        \n        <div class="meal-info-note">\n          <p>This is a default meal. Limited details available.</p>\n        </div>\n      </div>\n    '):'\n      <div class="meal-details-loading">\n        <div class="loading-spinner"></div>\n        <p>Loading meal details...</p>\n      </div>\n    ',s='\n    <div class="meal-details-popup-overlay" id="meal-details-popup-overlay">\n      <div class="meal-details-popup">\n        <div class="meal-details-popup-header">\n          <h2>Meal Details</h2>\n          <button class="popup-close" id="meal-details-close">&times;</button>\n        </div>\n        <div class="meal-details-popup-body">\n          '.concat(l,"\n        </div>\n      </div>\n    </div>\n  "),document.body.insertAdjacentHTML("beforeend",s),c=document.getElementById("meal-details-popup-overlay"),d=document.getElementById("meal-details-close"),u=function(){c&&c.parentNode&&c.parentNode.removeChild(c)},d&&d.addEventListener("click",u),c&&c.addEventListener("click",(function(e){e.target===c&&u()})),!n.recipe_id||null!==(i=n.id)&&void 0!==i&&i.toString().startsWith("default_")){e.next=24;break}return e.prev=12,e.next=15,a.A.getMealDetails(n.recipe_id);case 15:(p=e.sent)&&p.meal&&(f=p.meal,h='\n          <div class="meal-details-content">\n            <div class="meal-details-header">\n              <img src="'.concat(f.image_url||n.image,'" alt="').concat(f.food_name,'">\n              <div class="meal-basic-info">\n                <h3>').concat(f.food_name,'</h3>\n                <p class="meal-calories">').concat(f.calories_per_serving," kcal per ").concat(f.serving_unit||"serving","</p>\n                ").concat(null!==(m=f.recipe_metadata)&&void 0!==m&&m.total_time?'<p class="meal-time">‚è±Ô∏è '.concat(f.recipe_metadata.total_time," minutes</p>"):"",'\n              </div>\n            </div>\n            \n            <div class="meal-nutrition">\n              <h4>Nutrition per serving:</h4>\n              <div class="nutrition-grid">\n                <div class="nutrition-item">\n                  <span class="nutrition-label">Protein</span>\n                  <span class="nutrition-value">').concat(Math.round(f.protein_per_serving||0),'g</span>\n                </div>\n                <div class="nutrition-item">\n                  <span class="nutrition-label">Carbs</span>\n                  <span class="nutrition-value">').concat(Math.round(f.carbs_per_serving||0),'g</span>\n                </div>\n                <div class="nutrition-item">\n                  <span class="nutrition-label">Fat</span>\n                  <span class="nutrition-value">').concat(Math.round(f.fat_per_serving||0),"g</span>\n                </div>\n              </div>\n            </div>\n\n            ").concat(null!==(v=f.recipe_metadata)&&void 0!==v&&v.ingredients&&f.recipe_metadata.ingredients.length>0?'\n              <div class="meal-ingredients">\n                <h4>Ingredients:</h4>\n                <ul>\n                  '.concat(f.recipe_metadata.ingredients.slice(0,10).map((function(e){return"<li>".concat(e,"</li>")})).join(""),"\n                  ").concat(f.recipe_metadata.ingredients.length>10?"<li><em>... and ".concat(f.recipe_metadata.ingredients.length-10," more ingredients</em></li>"):"","\n                </ul>\n              </div>\n            "):"","\n\n            ").concat(null!==(g=f.recipe_metadata)&&void 0!==g&&g.total_nutrition?'\n              <div class="detailed-nutrition">\n                <h4>Detailed Nutrition:</h4>\n                <div class="nutrition-details-grid">\n                  '.concat(f.recipe_metadata.total_nutrition.fiber?"<div>Fiber: ".concat(Math.round(f.recipe_metadata.total_nutrition.fiber),"g</div>"):"","\n                  ").concat(f.recipe_metadata.total_nutrition.sugar?"<div>Sugar: ".concat(Math.round(f.recipe_metadata.total_nutrition.sugar),"g</div>"):"","\n                  ").concat(f.recipe_metadata.total_nutrition.sodium?"<div>Sodium: ".concat(Math.round(f.recipe_metadata.total_nutrition.sodium),"mg</div>"):"","\n                  ").concat(f.recipe_metadata.total_nutrition.cholesterol?"<div>Cholesterol: ".concat(Math.round(f.recipe_metadata.total_nutrition.cholesterol),"mg</div>"):"","\n                </div>\n              </div>\n            "):"","\n          </div>\n        "),(y=document.querySelector(".meal-details-popup-body"))&&(y.innerHTML=h)),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(12),console.error("Error fetching meal details:",e.t0),(b=document.querySelector(".meal-details-popup-body"))&&(b.innerHTML='\n          <div class="meal-details-error">\n            <h4>Error</h4>\n            <p>Failed to load meal details. Please try again.</p>\n            <div class="basic-meal-info">\n              <img src="'.concat(n.image,'" alt="').concat(n.name,'">\n              <h3>').concat(n.name,"</h3>\n              <p>").concat(n.calories," kcal per serving</p>\n            </div>\n          </div>\n        "));case 24:case"end":return e.stop()}}),e,null,[[12,19]])})));return function(n){return e.apply(this,arguments)}}(),h=function(e,n,t){var i=document.getElementById("generate-meal-plan-btn"),l=document.getElementById("complete-profile-btn"),s=document.getElementById("add-full-meal-plan-btn"),c=document.querySelectorAll(".meal-plan-add-btn"),d=document.querySelectorAll("[data-meal-details-trigger]");i&&e&&i.addEventListener("click",e),l&&t&&l.addEventListener("click",t),s&&s.addEventListener("click",o(r().mark((function e(){var n,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.querySelectorAll(".meal-plan-card"),t=[],n.forEach((function(e){var n=e.querySelector(".meal-plan-add-btn");if(n&&n.dataset.meal)try{var a=JSON.parse(n.dataset.meal);t.push(a)}catch(e){console.error("Error parsing meal data:",e)}})),!(t.length>0)){e.next=20;break}return s.disabled=!0,s.textContent="Adding Plan...",e.prev=6,e.next=9,g(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error("Error adding full meal plan:",e.t0);case 14:return e.prev=14,s.disabled=!1,s.innerHTML='<span class="btn-icon">üìã</span> Add Plan',e.finish(14);case 18:e.next=21;break;case 20:alert("No meals found to add");case 21:case"end":return e.stop()}}),e,null,[[6,11,14,18]])})))),c&&c.forEach((function(e){e.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation();try{!function(e){var n,t,i,l=document.getElementById("meal-plan-popup-overlay");l&&l.remove();var s='\n    <div class="meal-popup-overlay" id="meal-plan-popup-overlay">\n      <div class="meal-popup">\n        <div class="meal-popup-header">\n          <h3>Add '.concat(e.name,'</h3>\n          <button class="popup-close" id="meal-plan-popup-close">&times;</button>\n        </div>\n        <div class="meal-popup-content">\n          <div class="form-group">\n            <label for="meal-plan-meal-type">Meal Type:</label>\n            <select id="meal-plan-meal-type" required>\n              <option value="">Select meal type</option>\n              <option value="breakfast" ').concat("breakfast"===(null===(n=e.type)||void 0===n?void 0:n.toLowerCase())?"selected":"",'>Breakfast</option>\n              <option value="lunch" ').concat("lunch"===(null===(t=e.type)||void 0===t?void 0:t.toLowerCase())?"selected":"",'>Lunch</option>\n              <option value="dinner" ').concat("dinner"===(null===(i=e.type)||void 0===i?void 0:i.toLowerCase())?"selected":"",'>Dinner</option>\n              <option value="snack">Snack</option>\n            </select>\n          </div>\n          <div class="form-group">\n            <label for="meal-plan-servings">Servings:</label>\n            <input type="number" id="meal-plan-servings" min="1" step="1" value="1" required>\n          </div>\n          <div class="form-group">\n            <label for="meal-plan-log-date">Date:</label>\n            <input type="date" id="meal-plan-log-date" value="').concat(v(),'" required>\n          </div>\n          <div class="form-actions">\n            <button class="btn-cancel" id="meal-plan-btn-cancel">Cancel</button>\n            <button class="btn-add" id="meal-plan-btn-add">Add</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  ');document.body.insertAdjacentHTML("beforeend",s);var c=document.getElementById("meal-plan-popup-overlay"),d=document.getElementById("meal-plan-popup-close"),u=document.getElementById("meal-plan-btn-cancel"),p=document.getElementById("meal-plan-btn-add"),m=function(){c&&c.parentNode&&c.parentNode.removeChild(c)};d&&d.addEventListener("click",m),u&&u.addEventListener("click",m),c&&c.addEventListener("click",(function(e){e.target===c&&m()})),p&&p.addEventListener("click",o(r().mark((function n(){var t,i,o,l,s,c,d,u;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=null===(t=document.getElementById("meal-plan-meal-type"))||void 0===t?void 0:t.value,s=parseFloat(null===(i=document.getElementById("meal-plan-servings"))||void 0===i?void 0:i.value),c=null===(o=document.getElementById("meal-plan-log-date"))||void 0===o?void 0:o.value,l&&s&&c){n.next=6;break}return alert("Please fill all fields"),n.abrupt("return");case 6:if(n.prev=6,p.disabled=!0,p.textContent="Adding...",!e.recipe_id||null!==(d=e.id)&&void 0!==d&&d.toString().startsWith("default_")){n.next=15;break}return console.log("üçΩÔ∏è Adding meal from plan:",{recipe_id:e.recipe_id,meal_type:l,servings:s,log_date:c}),n.next=13,a.A.addMealFromPlan({recipe_id:e.recipe_id,meal_type:l,servings:s,log_date:c});case 13:n.next=18;break;case 15:return console.log("üçΩÔ∏è Adding default meal:",{food_item_id:e.id,meal_type:l,servings:s,log_date:c}),n.next=18,a.A.createMealEntry({food_item_id:e.id,meal_type:l,servings:s,log_date:c});case 18:alert("Meal added successfully!"),m(),u=new CustomEvent("mealPlanMealAdded"),document.dispatchEvent(u),n.next=30;break;case 24:n.prev=24,n.t0=n.catch(6),console.error("Error adding meal from plan:",n.t0),alert("Failed to add meal: ".concat(n.t0.message)),p.disabled=!1,p.textContent="Add";case 30:case"end":return n.stop()}}),n,null,[[6,24]])}))))}(JSON.parse(e.dataset.meal))}catch(e){console.error("Error parsing meal data:",e)}}))})),d&&d.forEach((function(e){e.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation();var t=e.closest(".meal-plan-card");if(t){var a=t.querySelector(".meal-plan-add-btn");if(a&&a.dataset.meal)try{var r=JSON.parse(a.dataset.meal);f(r)}catch(e){console.error("Error parsing meal data:",e)}}}))}))}},275:(e,n,t)=>{function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){if(e){if("string"==typeof e)return i(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}t.d(n,{Rd:()=>c,sh:()=>s,zq:()=>o});var o={dietary:{title:"Dietary Preferences",icon:"ü•ó",keywords:["vegetarian","vegan","dairy free foods","egg free","lactose free","no shell fish","low calorie","healthy","light","low cholesterol","low protein","very low carbs","high fiber","high protein","protein"]},cooking:{title:"Cooking Style",icon:"üë®‚Äçüç≥",keywords:["no cook","stove top","oven","baking","broil/grill","microwave","pressure cooker","deep fried","steam","stir fry","wok","small appliance","mixer","dehydrator","bread machine"]},mealtime:{title:"Meal Type & Time",icon:"‚è∞",keywords:["breakfast","brunch","lunch","dinner","snacks","dessert","one dish meal","stew","soup","pasta","bread","beverages","< 15 mins","< 30 mins","< 60 mins","weeknight","inexpensive"]},ingredients:{title:"Main Ingredients",icon:"ü•ò",keywords:["chicken","beef","pork","fish","seafood","vegetable","soy/tofu","rice","pasta","beans","cheese","nuts","fruits","berries","mushroom","peppers","onions","spinach","corn"]},cuisine:{title:"Cuisine & Flavors",icon:"üåç",keywords:["chinese","japanese","thai","vietnamese","korean","indian","italian","french","mexican","spanish","mediterranean","spicy","sweet","savory","umami","tangy","sour","mild"]}},l=function(){return Object.values(o).reduce((function(e,n){return[].concat(a(e),a(n.keywords))}),[])},s=function(e){var n={};return Object.keys(o).forEach((function(t){var a=o[t].keywords;n[t]=e.filter((function(e){return a.includes(e)})).length})),n},c=function(e){var n=l();return e.filter((function(e){return n.includes(e)}))}}}]);
//# sourceMappingURL=app~3a552275.bundle.js.map